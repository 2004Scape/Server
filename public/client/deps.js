var o=Object.defineProperty,v=Object.getOwnPropertyNames,O=Object.getOwnPropertyDescriptor,L=Object.prototype.hasOwnProperty,e=new WeakMap,Ae=t=>{var r,n=e.get(t);return n||(n=o({},"__esModule",{value:!0}),(t&&"object"==typeof t||"function"==typeof t)&&v(t).map(e=>!L.call(n,e)&&o(n,e,{get:()=>t[e],enumerable:!(r=O(t,e))||r.enumerable})),e.set(t,n)),n},t=(e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0,configurable:!0,set:e=>t[r]=()=>e})},r=(e,t)=>()=>t=e?e(e=0):t,Me={};t(Me,{win32:()=>p,toNamespacedPath:()=>j,sep:()=>$,resolve:()=>x,relative:()=>B,posix:()=>m,parse:()=>V,normalize:()=>U,join:()=>N,isAbsolute:()=>D,format:()=>H,extname:()=>z,dirname:()=>W,delimiter:()=>Y,default:()=>k,basename:()=>G});function n(e){return e}function a(){throw new Error("Not implemented")}var i,s,l,c,u,d,h,f,m,p,k,x,U,D,N,B,j,W,G,z,H,V,$,Y,q=(e,t,r)=>(r=null!=e?i(u(e)):{},((t,r,n,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let e of c(r))d.call(t,e)||e===n||s(t,e,{get:()=>r[e],enumerable:!(o=l(r,e))||o.enumerable});return t})(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)),Fe=r(()=>{var e,t;i=Object.create,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,e=(e,t)=>{function h(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function a(e,t){for(var r,n="",o=0,a=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a!==s-1&&1!==i)if(a!==s-1&&2===i){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){var l=n.lastIndexOf("/");if(l!==n.length-1){o=-1===l?(n="",0):(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=s,i=0;continue}}else if(2===n.length||1===n.length){n="",a=s,i=o=0;continue}t&&(0<n.length?n+="/..":n="..",o=2)}else 0<n.length?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),o=s-a-1;a=s,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var f={resolve:function(){for(var e,t="",r=!1,n=arguments.length-1;-1<=n&&!r;n--){var o=0<=n?arguments[n]:e=void 0===e?process.cwd():e;h(o),0!==o.length&&(t=o+"/"+t,r=47===o.charCodeAt(0))}return t=a(t,!r),r?0<t.length?"/"+t:"/":0<t.length?t:"."},normalize:function(e){var t,r;return h(e),0===e.length?".":(t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1),0<(e=0!==(e=a(e,!t)).length||t?e:".").length&&r&&(e+="/"),t?"/"+e:e)},isAbsolute:function(e){return h(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];h(r),0<r.length&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":f.normalize(e)},relative:function(e,t){if(h(e),h(t),e===t||(e=f.resolve(e))===(t=f.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,o=n-r,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var i=t.length-a,s=o<i?o:i,l=-1,c=0;c<=s;++c){if(c===s){if(s<i){if(47===t.charCodeAt(a+c))return t.slice(a+c+1);if(0===c)return t.slice(a+c)}else s<o&&(47===e.charCodeAt(r+c)?l=c:0===c&&(l=0));break}var u=e.charCodeAt(r+c);if(u!==t.charCodeAt(a+c))break;47===u&&(l=c)}for(var d="",c=r+l+1;c<=n;++c)c!==n&&47!==e.charCodeAt(c)||(0===d.length?d+="..":d+="/..");return 0<d.length?d+t.slice(a+l):(47===t.charCodeAt(a+=l)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(h(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),r=-1,n=!0,o=e.length-1;1<=o;--o)if(47===e.charCodeAt(o)){if(!n){r=o;break}}else n=!1;return-1===r?t?"/":".":t&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');h(e);var r=0,n=-1,o=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var a=t.length-1,i=-1,s=e.length-1;0<=s;--s){var l=e.charCodeAt(s);if(47===l){if(!o){r=s+1;break}}else-1===i&&(o=!1,i=s+1),0<=a&&(l===t.charCodeAt(a)?-1==--a&&(n=s):(a=-1,n=i))}return r===n?n=i:-1===n&&(n=e.length),e.slice(r,n)}for(s=e.length-1;0<=s;--s)if(47===e.charCodeAt(s)){if(!o){r=s+1;break}}else-1===n&&(o=!1,n=s+1);return-1===n?"":e.slice(r,n)},extname:function(e){h(e);for(var t=-1,r=0,n=-1,o=!0,a=0,i=e.length-1;0<=i;--i){var s=e.charCodeAt(i);if(47===s){if(o)continue;r=i+1;break}-1===n&&(o=!1,n=i+1),46===s?-1===t?t=i:1!==a&&(a=1):-1!==t&&(a=-1)}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t="/",r=(e=e).dir||e.root,n=e.base||(e.name||"")+(e.ext||""),r?r===e.root?r+n:r+t+n:n;var t,r,n},parse:function(e){h(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0!==e.length){for(var r,n=47===e.charCodeAt(0),o=n?(t.root="/",1):0,a=-1,i=0,s=-1,l=!0,c=e.length-1,u=0;o<=c;--c){if(47===(r=e.charCodeAt(c))){if(l)continue;i=c+1;break}-1===s&&(l=!1,s=c+1),46===r?-1===a?a=c:1!==u&&(u=1):-1!==a&&(u=-1)}-1===a||-1===s||0===u||1===u&&a===s-1&&a===i+1?-1!==s&&(t.base=t.name=0===i&&n?e.slice(1,s):e.slice(i,s)):(0===i&&n?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(i,a),t.base=e.slice(i,s)),t.ext=e.slice(a,s)),0<i?t.dir=e.slice(0,i-1):n&&(t.dir="/")}return t},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,t.exports=f},h=q((()=>(t||e((t={exports:{}}).exports,t),t.exports))()),f=h=h,h.parse??=a,f.parse??=a,m={resolve:h.resolve.bind(h),normalize:h.normalize.bind(h),isAbsolute:h.isAbsolute.bind(h),join:h.join.bind(h),relative:h.relative.bind(h),toNamespacedPath:n,dirname:h.dirname.bind(h),basename:h.basename.bind(h),extname:h.extname.bind(h),format:h.format.bind(h),parse:h.parse.bind(h),sep:"/",delimiter:":",win32:void 0,posix:void 0,_makeLong:n},p={sep:"\\",delimiter:";",win32:void 0,...m,posix:m},m.win32=p.win32=p,{resolve:x,normalize:U,isAbsolute:D,join:N,relative:B,toNamespacedPath:j,dirname:W,basename:G,extname:z,format:H,parse:V,sep:$,delimiter:Y}=k=m.posix=m}),Ie={};function T(e){return"string"==typeof e}function J(e){return"object"==typeof e&&null!==e}function _(e){return null===e}function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function g(e,t,r){var n;return e&&J(e)&&e instanceof E?e:((n=new E).parse(e,t,r),n)}function Z(e){return(e=T(e)?g(e):e)instanceof E?e.format():E.prototype.format.call(e)}function K(e,t){return g(e,!1,!0).resolve(t)}function X(e,t){return e?g(e,!1,!0).resolveObject(t):t}t(Ie,{resolveObject:()=>X,resolve:()=>K,parse:()=>g,format:()=>Z,default:()=>ae,Url:()=>E,URLSearchParams:()=>y,URL:()=>S});var S,y,Q,ee,te,re,A,M,I,C,ne,oe,F,P,R,ae,w,Pe=r(()=>{({URL:S,URLSearchParams:y}=globalThis),Q=/^([a-z0-9.+-]+:)/i,ee=/:[0-9]*$/,te=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,re=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"\t"]),A=["'"].concat(re),M=["%","/","?",";","#"].concat(A),I=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,ne=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oe={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},R={parse(e){var a=decodeURIComponent;return(e+"").replace(/\+/g," ").split("&").filter(Boolean).reduce(function(e,t,r){var t=t.split("="),n=a(t[0]||""),t=a(t[1]||""),o=e[n];return e[n]=void 0===o?t:[].concat(o,t),e},{})},stringify(e){var n=encodeURIComponent;return Object.keys(e||{}).reduce(function(t,r){return[].concat(e[r]).forEach(function(e){t.push(n(r)+"="+n(e))}),t},[]).join("&").replace(/\s/g,"+")}},E.prototype.parse=function(e,t,r){if(!T(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(n);o[0]=o[0].replace(/\\/g,"/");var a=(a=e=o.join(n)).trim();if(!r&&1===e.split("#").length){o=te.exec(a);if(o)return this.path=a,this.href=a,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?R.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var i,n=Q.exec(a);if(n&&(i=(n=n[0]).toLowerCase(),this.protocol=i,a=a.substr(n.length)),!(r||n||a.match(/^\/\/[^@\/]+@[^@\/]+/))||!(v="//"===a.substr(0,2))||n&&F[n]||(a=a.substr(2),this.slashes=!0),!F[n]&&(v||n&&!P[n])){for(var s=-1,l=0;l<I.length;l++)-1!==(c=a.indexOf(I[l]))&&(-1===s||c<s)&&(s=c);-1!==(e=-1===s?a.lastIndexOf("@"):a.lastIndexOf("@",s))&&(o=a.slice(0,e),a=a.slice(e+1),this.auth=decodeURIComponent(o));for(var c,s=-1,l=0;l<M.length;l++)-1!==(c=a.indexOf(M[l]))&&(-1===s||c<s)&&(s=c);-1===s&&(s=a.length),this.host=a.slice(0,s),a=a.slice(s),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var u=this.hostname.split(/\./),l=0,d=u.length;l<d;l++){var h=u[l];if(h&&!h.match(C)){for(var f="",m=0,p=h.length;m<p;m++)127<h.charCodeAt(m)?f+="x":f+=h[m];if(!f.match(C)){var g=u.slice(0,l),y=u.slice(l+1),w=h.match(ne);w&&(g.push(w[1]),y.unshift(w[2])),y.length&&(a="/"+y.join(".")+a),this.hostname=g.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=new S("https://"+this.hostname).hostname);var b=this.port?":"+this.port:"",v=this.hostname||"";this.host=v+b,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0])&&(a="/"+a)}if(!oe[i])for(l=0,d=A.length;l<d;l++){var _,E=A[l];-1!==a.indexOf(E)&&((_=encodeURIComponent(E))===E&&(_=escape(E)),a=a.split(E).join(_))}n=a.indexOf("#"),-1!==n&&(this.hash=a.substr(n),a=a.slice(0,n)),e=a.indexOf("?");return-1!==e?(this.search=a.substr(e),this.query=a.substr(e+1),t&&(this.query=R.parse(this.query)),a=a.slice(0,e)):t&&(this.search="",this.query={}),a&&(this.pathname=a),P[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",o=this.search||"",this.path=b+o),this.href=this.format(),this},E.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",o=!1,a="",e=(this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(o+=":"+this.port),this.query&&J(this.query)&&Object.keys(this.query).length&&(a=R.stringify(this.query)),this.search||a&&"?"+a||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||P[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o=o||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},E.prototype.resolve=function(e){return this.resolveObject(g(e,!1,!0)).format()},E.prototype.resolveObject=function(e){T(e)&&((h=new E).parse(e,!1,!0),e=h);for(var t=new E,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];t[o]=this[o]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var a=Object.keys(e),i=0;i<a.length;i++){var s=a[i];"protocol"!==s&&(t[s]=e[s])}P[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(P[e.protocol]){if(t.protocol=e.protocol,e.host||F[e.protocol])t.pathname=e.pathname;else{for(var l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(h=t.pathname||"",f=t.search||"",t.path=h+f),t.slashes=t.slashes||e.slashes}else for(var c=Object.keys(e),u=0;u<c.length;u++){var d=c[u];t[d]=e[d]}else{var h=t.pathname&&"/"===t.pathname.charAt(0),f=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=f||h||t.host&&e.pathname,m=h,p=t.pathname&&t.pathname.split("/")||[],l=e.pathname&&e.pathname.split("/")||[],g=t.protocol&&!P[t.protocol];if(g&&(t.hostname="",t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===l[0]?l[0]=e.host:l.unshift(e.host)),e.host=null),h=h&&(""===l[0]||""===p[0])),f)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,p=l;else if(l.length)(p=p||[]).pop(),p=p.concat(l),t.search=e.search,t.query=e.query;else if(null!=e.search)return g&&(t.hostname=t.host=p.shift(),v=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=v.shift(),t.host=t.hostname=v.shift()),t.search=e.search,t.query=e.query,_(t.pathname)&&_(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(p.length){for(var y=p.slice(-1)[0],f=(t.host||e.host||1<p.length)&&("."===y||".."===y)||""===y,w=0,b=p.length;0<=b;b--)"."===(y=p[b])?p.splice(b,1):".."===y?(p.splice(b,1),w++):w&&(p.splice(b,1),w--);if(!h&&!m)for(;w--;)p.unshift("..");!h||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),f&&"/"!==p.join("/").substr(-1)&&p.push("");var v,m=""===p[0]||p[0]&&"/"===p[0].charAt(0);g&&(t.hostname=t.host=!m&&p.length?p.shift():"",v=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=v.shift(),t.host=t.hostname=v.shift()),(h=h||t.host&&p.length)&&!m&&p.unshift(""),p.length?t.pathname=p.join("/"):(t.pathname=null,t.path=null),_(t.pathname)&&_(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},E.prototype.parseHost=function(){var e=this.host,t=ee.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},ae={parse:g,resolve:K,resolveObject:X,format:Z,Url:E,URL:S,URLSearchParams:y}});function b(e){var t,r;window.audioContext&&(t=window.audioContext.createBuffer(1,1,22050),(r=window.audioContext.createBufferSource()).buffer=t,r.connect(window.audioContext.destination),r.start?r.start(0):r.play?r.play(0):r.noteOn&&r.noteOn(0)),document.removeEventListener("touchstart",b),document.removeEventListener("touchend",b),document.removeEventListener("click",b)}async function ie(e){try{var t=await window.audioContext.decodeAudioData(new Uint8Array(e).buffer),r=window.audioContext.createBufferSource();r.buffer=t,r.connect(w),r.start()}catch(e){console.error(e)}}function se(e){w||(w=window.audioContext.createGain()).connect(window.audioContext.destination),w.gain.value=e/128}window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext),document.addEventListener("touchstart",b),document.addEventListener("touchend",b),document.addEventListener("click",b),document.addEventListener("visibilitychange",()=>{document.hidden||window.audioContext&&window.audioContext.resume()}),we=import.meta.url;le=async function(t={}){var U,a,r,n,i=t,D=new Promise((e,t)=>{U=e,a=t}),e="object"==typeof window,o="undefined"!=typeof WorkerGlobalScope,s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type,N=!e&&!s&&!o,B=Object.assign({},i),l="";if(s){if("undefined"==typeof process||!process.release||"node"!==process.release.name)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var c=process.versions.node,u=c.split(".").slice(0,3);if((u=1e4*u[0]+100*u[1]+ +u[2].split("-")[0])<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+c+")");var j=()=>({}),u=(Fe(),Ae(Me));import.meta.url.startsWith("data:")||(l=u.dirname((Pe(),Ae(Ie).fileURLToPath(import.meta.url)))+"/"),n=e=>{e=T(e)?new URL(e):e;e=j.readFileSync(e);return E(Buffer.isBuffer(e)),e},r=async(e,t=!0)=>{e=T(e)?new URL(e):e;e=j.readFileSync(e,t?void 0:"utf8");return E(t?Buffer.isBuffer(e):"string"==typeof e),e},!i.thisProgram&&1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),0}else if(N){if("object"==typeof process||"object"==typeof window||"undefined"!=typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else{if(!e&&!o)throw new Error("environment detection error");if(o?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),l=(l=we?we:l).startsWith("blob:")?"":l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=typeof window&&"undefined"==typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");o&&(n=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),r=async n=>{if(T(n))return new Promise((e,t)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):t(r.status)},r.onerror=t,r.send(null)});var e=await fetch(n,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)}}var d,h,f,m,p,g,y,w,W,G=i.print||console.log.bind(console),b=i.printErr||console.error.bind(console),c=(Object.assign(i,B),"fetchSettings"),v=(Object.getOwnPropertyDescriptor(i,c)&&F(`\`Module.${c}\` was supplied but \`${c}\` not included in INCOMING_MODULE_JS_API`),i.arguments&&i.arguments,S("arguments","arguments_"),i.thisProgram&&i.thisProgram,S("thisProgram","thisProgram"),E(void 0===i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.read,"Module.read option was removed"),E(void 0===i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E(void 0===i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E(void 0===i.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),E(void 0===i.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),S("asm","wasmExports"),S("readAsync","readAsync"),S("readBinary","readBinary"),S("setWindowTitle","setWindowTitle"),E(!N,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable."),i.wasmBinary),_=(S("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&b("no native wasm support detected"),!1);function E(e,t){e||F("Assertion failed"+(t?": "+t:""))}var z=!1,H="data:application/octet-stream;base64,",V=e=>e.startsWith(H),T=e=>e.startsWith("file://");function $(){var e,t,r;_||(0==(e=ge())&&(e+=4),t=g[e>>2],r=g[e+4>>2],34821223==t&&2310721022==r||F(`Stack overflow! Stack cookie has been overwritten at ${L(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${L(r)} `+L(t)),1668509029!=g[0]&&F("Runtime error: The application has corrupted its heap memory area (address zero)!"))}u=new Int16Array(1),e=new Int8Array(u.buffer);if(u[0]=25459,115!==e[0]||99!==e[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function S(e,t,r=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){F(`\`Module.${e}\` has been replaced by \`${t}\``+(r?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function Y(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function q(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function J(e,t){q(e,()=>{k(`\`${e}\` is not longer defined by emscripten. `+t)})}function Z(t){Object.getOwnPropertyDescriptor(i,t)||Object.defineProperty(i,t,{configurable:!0,get(){var e=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;Y(t)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),F(e)}})}function K(){var e=d.buffer;i.HEAP8=h=new Int8Array(e),i.HEAP16=m=new Int16Array(e),i.HEAPU8=f=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=p=new Int32Array(e),i.HEAPU32=g=new Uint32Array(e),i.HEAPF32=y=new Float32Array(e),i.HEAPF64=W=new Float64Array(e),i.HEAP64=w=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}J("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),J("asm","Please use wasmExports instead"),E(!i.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),E("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),E(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),E(!i.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var X=[],Q=[],ee=[];function te(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),X.unshift(e);var e;ie(X)}function re(){if($(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),ee.unshift(e);var e;ie(ee)}var A=0,M=null,I={},C=null;function F(e){i.onAbort?.(e),b(e="Aborted("+e+")"),_=!0;e=new WebAssembly.RuntimeError(e);throw a(e),e}var P,R={error(){F("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){R.error()},createDataFile(){R.error()},createPreloadedFile(){R.error()},createLazyFile(){R.error()},open(){R.error()},mkdev(){R.error()},registerDevice(){R.error()},analyzePath(){R.error()},ErrnoError(){R.error()}};function O(r,n){return(...e)=>{E(z,`native function \`${r}\` called before runtime initialization`);var t=x[r];return E(t,`exported native function \`${r}\` not found`),E(e.length<=n,`native function \`${r}\` called with ${e.length} args but expects `+n),t(...e)}}function ne(){var e;return i.locateFile?V(e="tinymidipcm.wasm")?e:(e=e,i.locateFile?i.locateFile(e,l):l+e):new URL("tinymidipcm.wasm",import.meta.url).href}async function oe(e){if(!v)try{var t=await r(e);return new Uint8Array(t)}catch{}t=e;if(t==P&&v)return new Uint8Array(v);if(n)return n(t);throw"both async and sync fetching of the wasm failed"}async function ae(e,t,r){if(!(e||"function"!=typeof WebAssembly.instantiateStreaming||V(t)||T(t)||s))try{var n=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(e){b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation")}return(async(e,t)=>{try{var r=await oe(e);return await WebAssembly.instantiate(r,t)}catch(e){b("failed to asynchronously prepare wasm: "+e),T(P)&&b(`warning: Loading from a file URI (${P}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),F(e)}})(t,r)}i.FS_createDataFile=R.createDataFile,i.FS_createPreloadedFile=R.createPreloadedFile;var ie=e=>{for(;0<e.length;)e.shift()(i)};i.noExitRuntime;var L=e=>(E("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0"));var k=e=>{k.shown||={},k.shown[e]||(k.shown[e]=1,b(e=s?"warning: "+e:e))},se="undefined"!=typeof TextDecoder?new TextDecoder:void 0,le=(e,t=0,r=NaN)=>{for(var n=t+r,o=t;e[o]&&!(n<=o);)++o;if(16<o-t&&e.buffer&&se)return se.decode(e.subarray(t,o));for(var a="";t<o;){var i,s,l=e[t++];128&l?(s=63&e[t++],192==(224&l)?a+=String.fromCharCode((31&l)<<6|s):(i=63&e[t++],(l=224==(240&l)?(15&l)<<12|s<<6|i:(240!=(248&l)&&k("Invalid UTF-8 leading byte "+L(l)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),(7&l)<<18|s<<12|i<<6|63&e[t++]))<65536?a+=String.fromCharCode(l):(s=l-65536,a+=String.fromCharCode(55296|s>>10,56320|1023&s)))):a+=String.fromCharCode(l)}return a},ce=9007199254740992,ue=-9007199254740992;var de=[null,[],[]],he=(e,t)=>{var r=de[e];E(r),0===t||10===t?((1===e?G:b)(le(r)),r.length=0):r.push(t)};var fe,me={_abort_js:()=>F("native code called abort()"),emscripten_resize_heap:e=>{var t=f.length,r=(E(t<(e>>>=0)),2147483648);if(r<e)b(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${r} bytes!`);else{for(var n,o=1;o<=4;o*=2){var a=t*(1+.2/o),a=Math.min(a,e+100663296),i=Math.min(r,(a=Math.max(e,a),E(n=65536,"alignment argument is required"),Math.ceil(a/n)*n));if((t=>{var r=d.buffer,e=(t-r.byteLength+65535)/65536|0;try{return d.grow(e),K(),1}catch(e){b(`growMemory: Attempted to grow heap from ${r.byteLength} bytes to ${t} bytes, but got error: `+e)}})(i))return!0}b(`Failed to grow the heap from ${t} bytes to ${i} bytes, not enough memory!`)}return!1},fd_close:e=>{F("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},fd_seek:function(e,t,r,n){var o;return t=(o=t)<ue||ce<o?NaN:Number(o),70},fd_write:(e,t,r,n)=>{for(var o=0,a=0;a<r;a++){var i=g[t>>2],s=g[t+4>>2];t+=8;for(var l=0;l<s;l++)he(e,f[i+l]);o+=s}return g[n>>2]=o,0}},x=await(async()=>{function e(e,t){return x=e.exports,E(d=x.memory,"memory not found in wasm exports"),K(),e=x.__wasm_call_ctors,Q.unshift(e),e="wasm-instantiate",A--,i.monitorRunDependencies?.(A),e?(E(I[e]),delete I[e]):b("warning: run dependency removed without ID"),0==A&&(null!==C&&(clearInterval(C),C=null),M)&&(e=M,M=null,e()),x}r="wasm-instantiate",A++,i.monitorRunDependencies?.(A),r?(E(!I[r]),I[r]=1,null===C&&"undefined"!=typeof setInterval&&(C=setInterval(()=>{if(_)clearInterval(C),C=null;else{var e,t=!1;for(e in I)t||(t=!0,b("still waiting on run dependencies:")),b("dependency: "+e);t&&b("(end of list)")}},1e4))):b("warning: run dependency added without ID");var t,r=i,n={env:me,wasi_snapshot_preview1:me};if(i.instantiateWasm)try{return i.instantiateWasm(n,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),a(e)}P??=ne();try{var o=await ae(v,P,n);return t=o,E(i===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,e(t.instance)}catch(e){return a(e),Promise.reject(e)}})(),pe=(O("__wasm_call_ctors",0),i._malloc=O("malloc",1),i._free=O("free",1),i._tsf_load_memory=O("tsf_load_memory",2),i._tsf_close=O("tsf_close",1),i._tsf_reset=O("tsf_reset",1),i._tsf_set_output=O("tsf_set_output",4),i._realloc=O("realloc",2),i._tsf_channel_set_bank_preset=O("tsf_channel_set_bank_preset",4),i._tml_load_memory=O("tml_load_memory",2),i._midi_render=O("midi_render",7),O("fflush",1),O("strerror",1),x.emscripten_stack_init),ge=x.emscripten_stack_get_end;i.setValue=function(e,t,r="i8"){switch(r=r.endsWith("*")?"*":r){case"i1":case"i8":h[e]=t;break;case"i16":m[e>>1]=t;break;case"i32":p[e>>2]=t;break;case"i64":w[e>>3]=BigInt(t);break;case"float":y[e>>2]=t;break;case"double":W[e>>3]=t;break;case"*":g[e>>2]=t;break;default:F("invalid type for setValue: "+r)}},i.getValue=function(e,t="i8"){switch(t=t.endsWith("*")?"*":t){case"i1":case"i8":return h[e];case"i16":return m[e>>1];case"i32":return p[e>>2];case"i64":return w[e>>3];case"float":return y[e>>2];case"double":return W[e>>3];case"*":return g[e>>2];default:F("invalid type for getValue: "+t)}},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","stackAlloc","getTempRet0","setTempRet0","zeroMemory","exitJS","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","getExecutableName","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","mmapAlloc","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_unlink","FS_createDataFile","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach(function(r){q(r,()=>{var e=`\`${r}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,t=r;e+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${t=r.startsWith("_")?t:"$"+r}')`,Y(r)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),k(e)}),Z(r)});function ye(){var e;pe(),E(0==(3&(e=ge()))),0==e&&(e+=4),g[e>>2]=34821223,g[e+4>>2]=2310721022,g[0]=1668509029}if(["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","alignMemory","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","UTF16Decoder","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(Z),i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();!function e(){function t(){E(!fe),fe=!0,i.calledRun=!0,_||(E(!z),z=!0,$(),ie(Q),U(i),i.onRuntimeInitialized?.(),E(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),re())}0<A||(ye(),te(),0<A)?M=e:(i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),t()},1)):t(),$())}(),o=D;for(let e of Object.keys(i))e in t||Object.defineProperty(t,e,{configurable:!0,get(){F(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return o};var we,le,ce=function(e){if(new.target)throw new Error("loadTinyMidiPCM() should not be called with `new loadTinyMidiPCM()`");return le(e)};class ue{constructor(e={}){this.wasmModule=void 0,this.soundfontBufferPtr=0,this.soundfontPtr=0,this.midiBufferPtr=0,this.renderInterval=e.renderInterval||100,this.sampleRate=e.sampleRate||44100,this.channels=e.channels||2,this.gain=e.gain||0,e.bufferSize?this.bufferSize=e.bufferSize:this.setBufferDuration(1),this.onPCMData=e.onPCMData||(()=>{}),this.onRenderEnd=e.onRenderEnd||(()=>{}),this.renderTimer=void 0,this.test=0}async init(){this.wasmModule||(this.wasmModule=await ce(),this.pcmBufferPtr=this.wasmModule._malloc(this.bufferSize),this.msecsPtr=this.wasmModule._malloc(8))}setBufferDuration(e){this.bufferSize=4*this.sampleRate*this.channels*e}ensureInitialized(){if(!this.wasmModule)throw new Error(this.constructor.name+" not initalized. call .init()")}setSoundfont(e){this.ensureInitialized();var{_malloc:t,_free:r,_tsf_load_memory:n,_tsf_set_output:o}=this.wasmModule;r(this.soundfontBufferPtr),this.soundfontBufferPtr=t(e.length),this.wasmModule.HEAPU8.set(e,this.soundfontBufferPtr),this.soundfontPtr=n(this.soundfontBufferPtr,e.length),o(this.soundfontPtr,2===this.channels?0:2,this.sampleRate,this.gain)}getPCMBuffer(){this.ensureInitialized();var e=new Uint8Array(this.bufferSize);return e.set(this.wasmModule.HEAPU8.subarray(this.pcmBufferPtr,this.pcmBufferPtr+this.bufferSize)),e}getMIDIMessagePtr(e){var{_malloc:t,_free:r,_tml_load_memory:n}=this.wasmModule;return r(this.midiBufferPtr),this.midiBufferPtr=t(e.length),this.wasmModule.HEAPU8.set(e,this.midiBufferPtr),n(this.midiBufferPtr,e.length)}renderMIDIMessage(e){var t=this.wasmModule._midi_render;return t(this.soundfontPtr,e,this.channels,this.sampleRate,this.pcmBufferPtr,this.bufferSize,this.msecsPtr)}render(e){if(this.ensureInitialized(),!this.soundfontPtr)throw new Error("no soundfont buffer set. call .setSoundfont");window.clearTimeout(this.renderTimer);let{setValue:t,getValue:r,_tsf_reset:n,_tsf_channel_set_bank_preset:o}=this.wasmModule,a=(t(this.msecsPtr,0,"double"),n(this.soundfontPtr),o(this.soundfontPtr,9,128,0),this.getMIDIMessagePtr(e)),i=function(){a=this.renderMIDIMessage(a);var e=this.getPCMBuffer();this.onPCMData(e),a?this.renderTimer=setTimeout(i,this.renderInterval):this.onRenderEnd(r(this.msecsPtr,"double"))}.bind(this);this.renderTimer=setTimeout(()=>{i()},16)}}function de(e,t,r){window._tinyMidiPlay&&window._tinyMidiPlay(e,t/128,r)}function he(e){window._tinyMidiVolume&&window._tinyMidiVolume(e/128)}function fe(e){window._tinyMidiStop&&window._tinyMidiStop(e)}(async()=>{let a=2,t=44100;let i=new Float32Array,s=window.audioContext.createGain(),l=(s.gain.setValueAtTime(.1,window.audioContext.currentTime),s.connect(window.audioContext.destination),window.audioContext.currentTime),c=[],r=new ue({renderInterval:30,onPCMData:e=>{var e=new Float32Array(e.buffer),t=new Float32Array(i.length+e.length);t.set(i,0),t.set(e,i.length),i=t},onRenderEnd:e=>{},bufferSize:102400});await r.init();var e=await fetch(new URL("SCC1_Florestan.sf2",import.meta.url)),e=new Uint8Array(await e.arrayBuffer());function n(){if(window.audioContext&&i.length){var e=window.audioContext.createBufferSource(),r=i.length/a,n=window.audioContext.createBuffer(a,r,t);for(let e=0;e<a;e++){var o=n.getChannelData(e);let t=e;for(let e=0;e<r;e++)o[e]=i[t],t+=a}l<window.audioContext.currentTime&&(l=window.audioContext.currentTime),e.buffer=n,e.connect(s),e.start(l),c.push(e),l+=n.duration,i=new Float32Array}}r.setSoundfont(e);let o;function u(){var e;o&&clearInterval(o),i=new Float32Array,c.length&&(e=s.gain.value,s.gain.setValueAtTime(0,window.audioContext.currentTime),c.forEach(e=>{e.stop(window.audioContext.currentTime)}),c=[],s.gain.setValueAtTime(e,window.audioContext.currentTime))}function d(e,t){-1!==e&&window._tinyMidiVolume(e),l=window.audioContext.currentTime,o=setInterval(n,250),r.render(t)}window._tinyMidiStop=async e=>{var t;e?(e=()=>{u()},t=window.audioContext.currentTime,s.gain.cancelScheduledValues(t),s.gain.setTargetAtTime(0,t,.5),setTimeout(e,2e3)):u()},window._tinyMidiVolume=(e=1)=>{s.gain.setValueAtTime(e,window.audioContext.currentTime)},window._tinyMidiPlay=async(e,t,r)=>{e&&(await window._tinyMidiStop(r),r?setTimeout(()=>{d(t,e)},2e3):d(t,e))}})(),Ce=import.meta.url;me=async function(t={}){var U,a,r,n,i=t,D=new Promise((e,t)=>{U=e,a=t}),e="object"==typeof window,o="undefined"!=typeof WorkerGlobalScope,s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type,N=!e&&!s&&!o,l=Object.assign({},i),B=(e,t)=>{throw t},c="";if(s){if("undefined"==typeof process||!process.release||"node"!==process.release.name)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var u=process.versions.node,d=u.split(".").slice(0,3);if((d=1e4*d[0]+100*d[1]+ +d[2].split("-")[0])<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+u+")");var j=()=>({}),d=(Fe(),Ae(Me));import.meta.url.startsWith("data:")||(c=d.dirname((Pe(),Ae(Ie).fileURLToPath(import.meta.url)))+"/"),n=e=>{e=T(e)?new URL(e):e;e=j.readFileSync(e);return E(Buffer.isBuffer(e)),e},r=async(e,t=!0)=>{e=T(e)?new URL(e):e;e=j.readFileSync(e,t?void 0:"utf8");return E(t?Buffer.isBuffer(e):"string"==typeof e),e},!i.thisProgram&&1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),B=(e,t)=>{throw process.exitCode=e,t}}else if(N){if("object"==typeof process||"object"==typeof window||"undefined"!=typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else{if(!e&&!o)throw new Error("environment detection error");if(o?c=self.location.href:"undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),c=(c=Ce?Ce:c).startsWith("blob:")?"":c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=typeof window&&"undefined"==typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");o&&(n=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),r=async n=>{if(T(n))return new Promise((e,t)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):t(r.status)},r.onerror=t,r.send(null)});var e=await fetch(n,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)}}var h,f,m,p,g,y,W,G,z,w=i.print||console.log.bind(console),b=i.printErr||console.error.bind(console),u=(Object.assign(i,l),"fetchSettings"),v=(Object.getOwnPropertyDescriptor(i,u)&&F(`\`Module.${u}\` was supplied but \`${u}\` not included in INCOMING_MODULE_JS_API`),i.arguments&&i.arguments,S("arguments","arguments_"),i.thisProgram&&i.thisProgram,S("thisProgram","thisProgram"),E(void 0===i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E(void 0===i.read,"Module.read option was removed"),E(void 0===i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E(void 0===i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E(void 0===i.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),E(void 0===i.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),S("asm","wasmExports"),S("readAsync","readAsync"),S("readBinary","readBinary"),S("setWindowTitle","setWindowTitle"),E(!N,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable."),i.wasmBinary),_=(S("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&b("no native wasm support detected"),!1);function E(e,t){e||F("Assertion failed"+(t?": "+t:""))}var H=!1,V="data:application/octet-stream;base64,",$=e=>e.startsWith(V),T=e=>e.startsWith("file://");function Y(){var e,t,r;_||(0==(e=Te())&&(e+=4),t=y[e>>2],r=y[e+4>>2],34821223==t&&2310721022==r||F(`Stack overflow! Stack cookie has been overwritten at ${L(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${L(r)} `+L(t)),1668509029!=y[0]&&F("Runtime error: The application has corrupted its heap memory area (address zero)!"))}d=new Int16Array(1),e=new Int8Array(d.buffer);if(d[0]=25459,115!==e[0]||99!==e[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function S(e,t,r=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){F(`\`Module.${e}\` has been replaced by \`${t}\``+(r?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function q(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function J(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function Z(e,t){J(e,()=>{k(`\`${e}\` is not longer defined by emscripten. `+t)})}function K(t){Object.getOwnPropertyDescriptor(i,t)||Object.defineProperty(i,t,{configurable:!0,get(){var e=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;q(t)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),F(e)}})}function X(){var e=h.buffer;i.HEAP8=f=new Int8Array(e),i.HEAP16=p=new Int16Array(e),i.HEAPU8=m=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=g=new Int32Array(e),i.HEAPU32=y=new Uint32Array(e),i.HEAPF32=W=new Float32Array(e),i.HEAPF64=z=new Float64Array(e),i.HEAP64=G=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}Z("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Z("asm","Please use wasmExports instead"),E(!i.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),E("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),E(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),E(!i.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var Q=[],ee=[],te=[];function re(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),Q.unshift(e);var e;le(Q)}function ne(){if(Y(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),te.unshift(e);var e;le(te)}var A=0,M=null,I={},C=null;function F(e){i.onAbort?.(e),b(e="Aborted("+e+")"),_=!0;e=new WebAssembly.RuntimeError(e);throw a(e),e}var P,R={error(){F("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){R.error()},createDataFile(){R.error()},createPreloadedFile(){R.error()},createLazyFile(){R.error()},open(){R.error()},mkdev(){R.error()},registerDevice(){R.error()},analyzePath(){R.error()},ErrnoError(){R.error()}};function O(r,n){return(...e)=>{E(H,`native function \`${r}\` called before runtime initialization`);var t=x[r];return E(t,`exported native function \`${r}\` not found`),E(e.length<=n,`native function \`${r}\` called with ${e.length} args but expects `+n),t(...e)}}function oe(){var e;return i.locateFile?$(e="bzip2.wasm")?e:(e=e,i.locateFile?i.locateFile(e,c):c+e):new URL("bzip2.wasm",import.meta.url).href}async function ae(e){if(!v)try{var t=await r(e);return new Uint8Array(t)}catch{}t=e;if(t==P&&v)return new Uint8Array(v);if(n)return n(t);throw"both async and sync fetching of the wasm failed"}async function ie(e,t,r){if(!(e||"function"!=typeof WebAssembly.instantiateStreaming||$(t)||T(t)||s))try{var n=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(e){b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation")}return(async(e,t)=>{try{var r=await ae(e);return await WebAssembly.instantiate(r,t)}catch(e){b("failed to asynchronously prepare wasm: "+e),T(P)&&b(`warning: Loading from a file URI (${P}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),F(e)}})(t,r)}i.FS_createDataFile=R.createDataFile,i.FS_createPreloadedFile=R.createPreloadedFile;class se{name="ExitStatus";constructor(e){this.message=`Program terminated with exit(${e})`,this.status=e}}var le=e=>{for(;0<e.length;)e.shift()(i)};var ce=i.noExitRuntime||!0,L=e=>(E("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0"));var k=e=>{k.shown||={},k.shown[e]||(k.shown[e]=1,b(e=s?"warning: "+e:e))},ue=0,de=()=>ce||0<ue,o=(e,t)=>{0;var r=w,n=b,o=!1;w=b=e=>{o=!0};try{we()}catch(e){}w=r,b=n,o&&(k("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc."),k("(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)")),de()&&!t&&(a(r=`program exited (with status: ${e}), but keepRuntimeAlive() is set (counter=${ue}) due to an async operation, so halting execution but not exiting the runtime or preventing further async execution (you can use emscripten_force_exit, if you want to force a true shutdown)`),b(r)),n=e,de()||(i.onExit?.(n),_=!0),B(n,new se(n))},he="undefined"!=typeof TextDecoder?new TextDecoder:void 0,fe=(e,t=0,r=NaN)=>{for(var n=t+r,o=t;e[o]&&!(n<=o);)++o;if(16<o-t&&e.buffer&&he)return he.decode(e.subarray(t,o));for(var a="";t<o;){var i,s,l=e[t++];128&l?(s=63&e[t++],192==(224&l)?a+=String.fromCharCode((31&l)<<6|s):(i=63&e[t++],(l=224==(240&l)?(15&l)<<12|s<<6|i:(240!=(248&l)&&k("Invalid UTF-8 leading byte "+L(l)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),(7&l)<<18|s<<12|i<<6|63&e[t++]))<65536?a+=String.fromCharCode(l):(s=l-65536,a+=String.fromCharCode(55296|s>>10,56320|1023&s)))):a+=String.fromCharCode(l)}return a},me=9007199254740992,pe=-9007199254740992;var ge=[null,[],[]],ye=(e,t)=>{var r=ge[e];E(r),0===t||10===t?((1===e?w:b)(fe(r)),r.length=0):r.push(t)},we=()=>{_e(0),ge[1].length&&ye(1,10),ge[2].length&&ye(2,10)};var be,ve={_abort_js:()=>F("native code called abort()"),emscripten_resize_heap:e=>{var t=m.length,r=(E(t<(e>>>=0)),2147483648);if(r<e)b(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${r} bytes!`);else{for(var n,o=1;o<=4;o*=2){var a=t*(1+.2/o),a=Math.min(a,e+100663296),i=Math.min(r,(a=Math.max(e,a),E(n=65536,"alignment argument is required"),Math.ceil(a/n)*n));if((t=>{var r=h.buffer,e=(t-r.byteLength+65535)/65536|0;try{return h.grow(e),X(),1}catch(e){b(`growMemory: Attempted to grow heap from ${r.byteLength} bytes to ${t} bytes, but got error: `+e)}})(i))return!0}b(`Failed to grow the heap from ${t} bytes to ${i} bytes, not enough memory!`)}return!1},exit:o,fd_close:e=>{F("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},fd_seek:function(e,t,r,n){var o;return t=(o=t)<pe||me<o?NaN:Number(o),70},fd_write:(e,t,r,n)=>{for(var o=0,a=0;a<r;a++){var i=y[t>>2],s=y[t+4>>2];t+=8;for(var l=0;l<s;l++)ye(e,m[i+l]);o+=s}return y[n>>2]=o,0}},x=await(async()=>{function e(e,t){return x=e.exports,E(h=x.memory,"memory not found in wasm exports"),X(),e=x.__wasm_call_ctors,ee.unshift(e),e="wasm-instantiate",A--,i.monitorRunDependencies?.(A),e?(E(I[e]),delete I[e]):b("warning: run dependency removed without ID"),0==A&&(null!==C&&(clearInterval(C),C=null),M)&&(e=M,M=null,e()),x}r="wasm-instantiate",A++,i.monitorRunDependencies?.(A),r?(E(!I[r]),I[r]=1,null===C&&"undefined"!=typeof setInterval&&(C=setInterval(()=>{if(_)clearInterval(C),C=null;else{var e,t=!1;for(e in I)t||(t=!0,b("still waiting on run dependencies:")),b("dependency: "+e);t&&b("(end of list)")}},1e4))):b("warning: run dependency added without ID");var t,r=i,n={env:ve,wasi_snapshot_preview1:ve};if(i.instantiateWasm)try{return i.instantiateWasm(n,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),a(e)}P??=oe();try{var o=await ie(v,P,n);return t=o,E(i===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,e(t.instance)}catch(e){return a(e),Promise.reject(e)}})(),_e=(O("__wasm_call_ctors",0),i._malloc=O("malloc",1),i._free=O("free",1),O("fflush",1)),Ee=(i._BZ2_bzBuffToBuffCompress=O("BZ2_bzBuffToBuffCompress",7),i._BZ2_bzBuffToBuffDecompress=O("BZ2_bzBuffToBuffDecompress",6),O("strerror",1),x.emscripten_stack_init),Te=x.emscripten_stack_get_end;i.setValue=function(e,t,r="i8"){switch(r=r.endsWith("*")?"*":r){case"i1":case"i8":f[e]=t;break;case"i16":p[e>>1]=t;break;case"i32":g[e>>2]=t;break;case"i64":G[e>>3]=BigInt(t);break;case"float":W[e>>2]=t;break;case"double":z[e>>3]=t;break;case"*":y[e>>2]=t;break;default:F("invalid type for setValue: "+r)}},i.getValue=function(e,t="i8"){switch(t=t.endsWith("*")?"*":t){case"i1":case"i8":return f[e];case"i16":return p[e>>1];case"i32":return g[e>>2];case"i64":return G[e>>3];case"float":return W[e>>2];case"double":return z[e>>3];case"*":return y[e>>2];default:F("invalid type for getValue: "+t)}},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","stackAlloc","getTempRet0","setTempRet0","zeroMemory","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","getExecutableName","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","mmapAlloc","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_unlink","FS_createDataFile","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach(function(r){J(r,()=>{var e=`\`${r}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,t=r;e+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${t=r.startsWith("_")?t:"$"+r}')`,q(r)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),k(e)}),K(r)});function Se(){var e;Ee(),E(0==(3&(e=Te()))),0==e&&(e+=4),y[e>>2]=34821223,y[e+4>>2]=2310721022,y[0]=1668509029}if(["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","ptrToString","exitJS","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","keepRuntimeAlive","alignMemory","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","UTF16Decoder","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(K),i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();!function e(){function t(){E(!be),be=!0,i.calledRun=!0,_||(E(!H),H=!0,Y(),le(ee),U(i),i.onRuntimeInitialized?.(),E(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),ne())}0<A||(Se(),re(),0<A)?M=e:(i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),t()},1)):t(),Y())}(),l=D;for(let e of Object.keys(i))e in t||Object.defineProperty(t,e,{configurable:!0,get(){F(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return l};var Ce,me,pe=function(e){if(new.target)throw new Error("loadBZip2WASM() should not be called with `new loadBZip2WASM()`");return me(e)},ge={"-2":"BZ_PARAM_ERROR: incorrect parameters","-3":"BZ_MEM_ERROR: couldn't allocate enough memory","-4":"BZ_DATA_ERROR: data integrity error when decompressing","-5":"BZ_DATA_ERROR_MAGIC: compressed data has incorrect header","-7":"BZ_UNEXPECTED_EOF: compressed data ends too early","-8":"BZ_OUTBUFF_FULL: destination buffer is full"};t=new class{constructor(){this.wasmModule=void 0}async init(){this.wasmModule||(this.wasmModule=await pe())}ensureInitialized(){if(!this.wasmModule)throw new Error(this.constructor.name+" not initalized. call .init()")}handleError(e,t,r){if(0!==e){this.wasmModule._free(t),this.wasmModule._free(r);t=ge[e];if(t)throw new Error(t);throw new Error("error code: "+e)}}createWASMBuffers(e,t){var{_malloc:r,setValue:n,HEAPU8:o}=this.wasmModule,a=r(e.length),o=(o.set(e,a),r(t)),e=r(t);return n(e,t,"i32"),{sourcePtr:a,destPtr:o,destLengthPtr:e}}createBuffer(e,t){var{_free:r,getValue:n,HEAPU8:o}=this.wasmModule,n=n(t,"i32"),a=new Uint8Array(n);return a.set(o.subarray(e,e+n)),r(e),r(t),a}decompress(e,t,r=!1,n=!1){let o=new Uint8Array(e);n&&(t=o[0]<<24|o[1]<<16|o[2]<<8|o[3],o[0]=66,o[1]=90,o[2]=104,r=!(o[3]=49)),r&&((e=new Uint8Array(o.length+4))[0]=66,e[1]=90,e[2]=104,e[3]=49,e.set(o,4),o=e),this.ensureInitialized();var{sourcePtr:n,destPtr:r,destLengthPtr:e}=this.createWASMBuffers(o,t),t=this.wasmModule._BZ2_bzBuffToBuffDecompress(r,e,n,o.length,0,0);return this.wasmModule._free(n),this.handleError(t,r,e),this.createBuffer(r,e)}compress(e,t=!1,r=!1,n=1,o=0){if(this.ensureInitialized(),(o=o||e.length)<128&&(o=128),n<=0||9<n)throw new RangeError("blockSize should be between 1-9");var{sourcePtr:o,destPtr:a,destLengthPtr:i}=this.createWASMBuffers(e,o),n=this.wasmModule._BZ2_bzBuffToBuffCompress(a,i,o,e.length,n,0,30),o=(this.wasmModule._free(o),this.handleError(n,a,i),this.createBuffer(a,i));return t&&(o[0]=e.length>>24&255,o[1]=e.length>>16&255,o[2]=e.length>>8&255,o[3]=255&e.length),r?o.subarray(4):o}},await t.init(),r=t;export{fe as stopMidi,se as setWaveVolume,he as setMidiVolume,ie as playWave,de as playMidi,r as BZip2};