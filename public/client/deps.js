var{defineProperty:y0,getOwnPropertyNames:d1,getOwnPropertyDescriptor:r1}=Object,e1=Object.prototype.hasOwnProperty;var K1=new WeakMap,sh=($)=>{var Z=K1.get($),J;if(Z)return Z;if(Z=y0({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")d1($).map((j)=>!e1.call(Z,j)&&y0(Z,j,{get:()=>$[j],enumerable:!(J=r1($,j))||J.enumerable}));return K1.set($,Z),Z};var f1=($,Z)=>{for(var J in Z)y0($,J,{get:Z[J],enumerable:!0,configurable:!0,set:(j)=>Z[J]=()=>j})};var V1=($,Z)=>()=>($&&(Z=$($=0)),Z);var dh=(($)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy($,{get:(Z,J)=>(typeof require!=="undefined"?require:Z)[J]}):$)(function($){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+$+'" is not supported')});var m0={};f1(m0,{win32:()=>t0,toNamespacedPath:()=>k2,sep:()=>O2,resolve:()=>K2,relative:()=>W2,posix:()=>Lh,parse:()=>N2,normalize:()=>f2,join:()=>U2,isAbsolute:()=>V2,format:()=>D2,extname:()=>w2,dirname:()=>z2,delimiter:()=>g2,default:()=>v2,basename:()=>B2});var j2,W1,C2,J2,Q2,Z2,q2=($,Z)=>()=>(Z||$((Z={exports:{}}).exports,Z),Z.exports),G2=($,Z,J,j)=>{if(Z&&typeof Z=="object"||typeof Z=="function")for(let v of J2(Z))!Z2.call($,v)&&v!==J&&W1($,v,{get:()=>Z[v],enumerable:!(j=C2(Z,v))||j.enumerable});return $},L2=($,Z,J)=>(J=$!=null?j2(Q2($)):{},G2(Z||!$||!$.__esModule?W1(J,"default",{value:$,enumerable:!0}):J,$)),Y2,k1,_,X2,U1=function($){return $},z1=function(){throw new Error("Not implemented")},Lh,t0,v2,K2,f2,V2,U2,W2,k2,z2,B2,w2,D2,N2,O2,g2;var l0=V1(()=>{j2=Object.create,W1=Object.defineProperty,C2=Object.getOwnPropertyDescriptor,J2=Object.getOwnPropertyNames,Q2=Object.getPrototypeOf,Z2=Object.prototype.hasOwnProperty,Y2=q2(($,Z)=>{function J(G){if(typeof G!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(G))}function j(G,q){for(var L="",Y=0,w=-1,K=0,D,V=0;V<=G.length;++V){if(V<G.length)D=G.charCodeAt(V);else{if(D===47)break;D=47}if(D===47){if(!(w===V-1||K===1))if(w!==V-1&&K===2){if(L.length<2||Y!==2||L.charCodeAt(L.length-1)!==46||L.charCodeAt(L.length-2)!==46){if(L.length>2){var A=L.lastIndexOf("/");if(A!==L.length-1){A===-1?(L="",Y=0):(L=L.slice(0,A),Y=L.length-1-L.lastIndexOf("/")),w=V,K=0;continue}}else if(L.length===2||L.length===1){L="",Y=0,w=V,K=0;continue}}q&&(L.length>0?L+="/..":L="..",Y=2)}else L.length>0?L+="/"+G.slice(w+1,V):L=G.slice(w+1,V),Y=V-w-1;w=V,K=0}else D===46&&K!==-1?++K:K=-1}return L}function v(G,q){var L=q.dir||q.root,Y=q.base||(q.name||"")+(q.ext||"");return L?L===q.root?L+Y:L+G+Y:Y}var U={resolve:function(){for(var G="",q=!1,L,Y=arguments.length-1;Y>=-1&&!q;Y--){var w;Y>=0?w=arguments[Y]:(L===void 0&&(L=process.cwd()),w=L),J(w),w.length!==0&&(G=w+"/"+G,q=w.charCodeAt(0)===47)}return G=j(G,!q),q?G.length>0?"/"+G:"/":G.length>0?G:"."},normalize:function(G){if(J(G),G.length===0)return".";var q=G.charCodeAt(0)===47,L=G.charCodeAt(G.length-1)===47;return G=j(G,!q),G.length===0&&!q&&(G="."),G.length>0&&L&&(G+="/"),q?"/"+G:G},isAbsolute:function(G){return J(G),G.length>0&&G.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var G,q=0;q<arguments.length;++q){var L=arguments[q];J(L),L.length>0&&(G===void 0?G=L:G+="/"+L)}return G===void 0?".":U.normalize(G)},relative:function(G,q){if(J(G),J(q),G===q||(G=U.resolve(G),q=U.resolve(q),G===q))return"";for(var L=1;L<G.length&&G.charCodeAt(L)===47;++L);for(var Y=G.length,w=Y-L,K=1;K<q.length&&q.charCodeAt(K)===47;++K);for(var D=q.length,V=D-K,A=w<V?w:V,N=-1,g=0;g<=A;++g){if(g===A){if(V>A){if(q.charCodeAt(K+g)===47)return q.slice(K+g+1);if(g===0)return q.slice(K+g)}else w>A&&(G.charCodeAt(L+g)===47?N=g:g===0&&(N=0));break}var M=G.charCodeAt(L+g),z=q.charCodeAt(K+g);if(M!==z)break;M===47&&(N=g)}var B="";for(g=L+N+1;g<=Y;++g)(g===Y||G.charCodeAt(g)===47)&&(B.length===0?B+="..":B+="/..");return B.length>0?B+q.slice(K+N):(K+=N,q.charCodeAt(K)===47&&++K,q.slice(K))},_makeLong:function(G){return G},dirname:function(G){if(J(G),G.length===0)return".";for(var q=G.charCodeAt(0),L=q===47,Y=-1,w=!0,K=G.length-1;K>=1;--K)if(q=G.charCodeAt(K),q===47){if(!w){Y=K;break}}else w=!1;return Y===-1?L?"/":".":L&&Y===1?"//":G.slice(0,Y)},basename:function(G,q){if(q!==void 0&&typeof q!="string")throw new TypeError('"ext" argument must be a string');J(G);var L=0,Y=-1,w=!0,K;if(q!==void 0&&q.length>0&&q.length<=G.length){if(q.length===G.length&&q===G)return"";var D=q.length-1,V=-1;for(K=G.length-1;K>=0;--K){var A=G.charCodeAt(K);if(A===47){if(!w){L=K+1;break}}else V===-1&&(w=!1,V=K+1),D>=0&&(A===q.charCodeAt(D)?--D===-1&&(Y=K):(D=-1,Y=V))}return L===Y?Y=V:Y===-1&&(Y=G.length),G.slice(L,Y)}else{for(K=G.length-1;K>=0;--K)if(G.charCodeAt(K)===47){if(!w){L=K+1;break}}else Y===-1&&(w=!1,Y=K+1);return Y===-1?"":G.slice(L,Y)}},extname:function(G){J(G);for(var q=-1,L=0,Y=-1,w=!0,K=0,D=G.length-1;D>=0;--D){var V=G.charCodeAt(D);if(V===47){if(!w){L=D+1;break}continue}Y===-1&&(w=!1,Y=D+1),V===46?q===-1?q=D:K!==1&&(K=1):q!==-1&&(K=-1)}return q===-1||Y===-1||K===0||K===1&&q===Y-1&&q===L+1?"":G.slice(q,Y)},format:function(G){if(G===null||typeof G!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof G);return v("/",G)},parse:function(G){J(G);var q={root:"",dir:"",base:"",ext:"",name:""};if(G.length===0)return q;var L=G.charCodeAt(0),Y=L===47,w;Y?(q.root="/",w=1):w=0;for(var K=-1,D=0,V=-1,A=!0,N=G.length-1,g=0;N>=w;--N){if(L=G.charCodeAt(N),L===47){if(!A){D=N+1;break}continue}V===-1&&(A=!1,V=N+1),L===46?K===-1?K=N:g!==1&&(g=1):K!==-1&&(g=-1)}return K===-1||V===-1||g===0||g===1&&K===V-1&&K===D+1?V!==-1&&(D===0&&Y?q.base=q.name=G.slice(1,V):q.base=q.name=G.slice(D,V)):(D===0&&Y?(q.name=G.slice(1,K),q.base=G.slice(1,V)):(q.name=G.slice(D,K),q.base=G.slice(D,V)),q.ext=G.slice(K,V)),D>0?q.dir=G.slice(0,D-1):Y&&(q.dir="/"),q},sep:"/",delimiter:":",win32:null,posix:null};U.posix=U,Z.exports=U}),k1=L2(Y2()),_=k1,X2=k1;_.parse??=z1;X2.parse??=z1;Lh={resolve:_.resolve.bind(_),normalize:_.normalize.bind(_),isAbsolute:_.isAbsolute.bind(_),join:_.join.bind(_),relative:_.relative.bind(_),toNamespacedPath:U1,dirname:_.dirname.bind(_),basename:_.basename.bind(_),extname:_.extname.bind(_),format:_.format.bind(_),parse:_.parse.bind(_),sep:"/",delimiter:":",win32:void 0,posix:void 0,_makeLong:U1},t0={sep:"\\",delimiter:";",win32:void 0,...Lh,posix:Lh};Lh.win32=t0.win32=t0;Lh.posix=Lh;v2=Lh,{resolve:K2,normalize:f2,isAbsolute:V2,join:U2,relative:W2,toNamespacedPath:k2,dirname:z2,basename:B2,extname:w2,format:D2,parse:N2,sep:O2,delimiter:g2}=Lh});var a0={};f1(a0,{resolveObject:()=>H1,resolve:()=>F1,parse:()=>Nh,format:()=>g1,default:()=>x2,Url:()=>i,URLSearchParams:()=>N1,URL:()=>o0});function i0($){return typeof $=="string"}function O1($){return typeof $=="object"&&$!==null}function rh($){return $===null}function F2($){return $==null}function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Nh($,Z,J){if($&&O1($)&&$ instanceof i)return $;var j=new i;return j.parse($,Z,J),j}function g1($){return i0($)&&($=Nh($)),$ instanceof i?$.format():i.prototype.format.call($)}function F1($,Z){return Nh($,!1,!0).resolve(Z)}function H1($,Z){return $?Nh($,!1,!0).resolveObject(Z):Z}var o0,N1,H2,I2,A2,T2,b2,p0,B1,w1,R2=255,D1,S2,P2,u0,Dh,n0,x2;var s0=V1(()=>{({URL:o0,URLSearchParams:N1}=globalThis);H2=/^([a-z0-9.+-]+:)/i,I2=/:[0-9]*$/,A2=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,T2=["<",">",'"',"`"," ","\r",`
`,"\t"],b2=["{","}","|","\\","^","`"].concat(T2),p0=["'"].concat(b2),B1=["%","/","?",";","#"].concat(p0),w1=["/","?","#"],D1=/^[+a-z0-9A-Z_-]{0,63}$/,S2=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P2={javascript:!0,"javascript:":!0},u0={javascript:!0,"javascript:":!0},Dh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},n0={parse($){var Z=decodeURIComponent;return($+"").replace(/\+/g," ").split("&").filter(Boolean).reduce(function(J,j,v){var U=j.split("="),G=Z(U[0]||""),q=Z(U[1]||""),L=J[G];return J[G]=L===void 0?q:[].concat(L,q),J},{})},stringify($){var Z=encodeURIComponent;return Object.keys($||{}).reduce(function(J,j){return[].concat($[j]).forEach(function(v){J.push(Z(j)+"="+Z(v))}),J},[]).join("&").replace(/\s/g,"+")}};i.prototype.parse=function($,Z,J){if(!i0($))throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var j=$.indexOf("?"),v=j!==-1&&j<$.indexOf("#")?"?":"#",U=$.split(v),G=/\\/g;U[0]=U[0].replace(G,"/"),$=U.join(v);var q=$;if(q=q.trim(),!J&&$.split("#").length===1){var L=A2.exec(q);if(L)return this.path=q,this.href=q,this.pathname=L[1],L[2]?(this.search=L[2],Z?this.query=n0.parse(this.search.substr(1)):this.query=this.search.substr(1)):Z&&(this.search="",this.query={}),this}var Y=H2.exec(q);if(Y){Y=Y[0];var w=Y.toLowerCase();this.protocol=w,q=q.substr(Y.length)}if(J||Y||q.match(/^\/\/[^@\/]+@[^@\/]+/)){var K=q.substr(0,2)==="//";K&&!(Y&&u0[Y])&&(q=q.substr(2),this.slashes=!0)}if(!u0[Y]&&(K||Y&&!Dh[Y])){for(var D=-1,V=0;V<w1.length;V++){var A=q.indexOf(w1[V]);A!==-1&&(D===-1||A<D)&&(D=A)}var N,g;D===-1?g=q.lastIndexOf("@"):g=q.lastIndexOf("@",D),g!==-1&&(N=q.slice(0,g),q=q.slice(g+1),this.auth=decodeURIComponent(N)),D=-1;for(var V=0;V<B1.length;V++){var A=q.indexOf(B1[V]);A!==-1&&(D===-1||A<D)&&(D=A)}D===-1&&(D=q.length),this.host=q.slice(0,D),q=q.slice(D),this.parseHost(),this.hostname=this.hostname||"";var M=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!M)for(var z=this.hostname.split(/\./),V=0,B=z.length;V<B;V++){var H=z[V];if(!!H&&!H.match(D1)){for(var R="",P=0,Ch=H.length;P<Ch;P++)H.charCodeAt(P)>127?R+="x":R+=H[P];if(!R.match(D1)){var x=z.slice(0,V),k=z.slice(V+1),Gh=H.match(S2);Gh&&(x.push(Gh[1]),k.unshift(Gh[2])),k.length&&(q="/"+k.join(".")+q),this.hostname=x.join(".");break}}}this.hostname.length>R2?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=new o0(`https://${this.hostname}`).hostname);var Oh=this.port?":"+this.port:"",eh=this.hostname||"";this.host=eh+Oh,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),q[0]!=="/"&&(q="/"+q))}if(!P2[w])for(var V=0,B=p0.length;V<B;V++){var Yh=p0[V];if(q.indexOf(Yh)!==-1){var gh=encodeURIComponent(Yh);gh===Yh&&(gh=escape(Yh)),q=q.split(Yh).join(gh)}}var Fh=q.indexOf("#");Fh!==-1&&(this.hash=q.substr(Fh),q=q.slice(0,Fh));var Bh=q.indexOf("?");if(Bh!==-1?(this.search=q.substr(Bh),this.query=q.substr(Bh+1),Z&&(this.query=n0.parse(this.query)),q=q.slice(0,Bh)):Z&&(this.search="",this.query={}),q&&(this.pathname=q),Dh[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Oh=this.pathname||"",h0=this.search||"";this.path=Oh+h0}return this.href=this.format(),this};i.prototype.format=function(){var $=this.auth||"";$&&($=encodeURIComponent($),$=$.replace(/%3A/i,":"),$+="@");var Z=this.protocol||"",J=this.pathname||"",j=this.hash||"",v=!1,U="";this.host?v=$+this.host:this.hostname&&(v=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(v+=":"+this.port)),this.query&&O1(this.query)&&Object.keys(this.query).length&&(U=n0.stringify(this.query));var G=this.search||U&&"?"+U||"";return Z&&Z.substr(-1)!==":"&&(Z+=":"),this.slashes||(!Z||Dh[Z])&&v!==!1?(v="//"+(v||""),J&&J.charAt(0)!=="/"&&(J="/"+J)):v||(v=""),j&&j.charAt(0)!=="#"&&(j="#"+j),G&&G.charAt(0)!=="?"&&(G="?"+G),J=J.replace(/[?#]/g,function(q){return encodeURIComponent(q)}),G=G.replace("#","%23"),Z+v+J+G+j};i.prototype.resolve=function($){return this.resolveObject(Nh($,!1,!0)).format()};i.prototype.resolveObject=function($){if(i0($)){var Z=new i;Z.parse($,!1,!0),$=Z}for(var J=new i,j=Object.keys(this),v=0;v<j.length;v++){var U=j[v];J[U]=this[U]}if(J.hash=$.hash,$.href==="")return J.href=J.format(),J;if($.slashes&&!$.protocol){for(var G=Object.keys($),q=0;q<G.length;q++){var L=G[q];L!=="protocol"&&(J[L]=$[L])}return Dh[J.protocol]&&J.hostname&&!J.pathname&&(J.path=J.pathname="/"),J.href=J.format(),J}if($.protocol&&$.protocol!==J.protocol){if(!Dh[$.protocol]){for(var Y=Object.keys($),w=0;w<Y.length;w++){var K=Y[w];J[K]=$[K]}return J.href=J.format(),J}if(J.protocol=$.protocol,!$.host&&!u0[$.protocol]){for(var B=($.pathname||"").split("/");B.length&&!($.host=B.shift()););$.host||($.host=""),$.hostname||($.hostname=""),B[0]!==""&&B.unshift(""),B.length<2&&B.unshift(""),J.pathname=B.join("/")}else J.pathname=$.pathname;if(J.search=$.search,J.query=$.query,J.host=$.host||"",J.auth=$.auth,J.hostname=$.hostname||$.host,J.port=$.port,J.pathname||J.search){var D=J.pathname||"",V=J.search||"";J.path=D+V}return J.slashes=J.slashes||$.slashes,J.href=J.format(),J}var A=J.pathname&&J.pathname.charAt(0)==="/",N=$.host||$.pathname&&$.pathname.charAt(0)==="/",g=N||A||J.host&&$.pathname,M=g,z=J.pathname&&J.pathname.split("/")||[],B=$.pathname&&$.pathname.split("/")||[],H=J.protocol&&!Dh[J.protocol];if(H&&(J.hostname="",J.port=null,J.host&&(z[0]===""?z[0]=J.host:z.unshift(J.host)),J.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(B[0]===""?B[0]=$.host:B.unshift($.host)),$.host=null),g=g&&(B[0]===""||z[0]==="")),N)J.host=$.host||$.host===""?$.host:J.host,J.hostname=$.hostname||$.hostname===""?$.hostname:J.hostname,J.search=$.search,J.query=$.query,z=B;else if(B.length)z||(z=[]),z.pop(),z=z.concat(B),J.search=$.search,J.query=$.query;else if(!F2($.search)){if(H){J.hostname=J.host=z.shift();var R=J.host&&J.host.indexOf("@")>0?J.host.split("@"):!1;R&&(J.auth=R.shift(),J.host=J.hostname=R.shift())}return J.search=$.search,J.query=$.query,(!rh(J.pathname)||!rh(J.search))&&(J.path=(J.pathname?J.pathname:"")+(J.search?J.search:"")),J.href=J.format(),J}if(!z.length)return J.pathname=null,J.search?J.path="/"+J.search:J.path=null,J.href=J.format(),J;for(var P=z.slice(-1)[0],Ch=(J.host||$.host||z.length>1)&&(P==="."||P==="..")||P==="",x=0,k=z.length;k>=0;k--)P=z[k],P==="."?z.splice(k,1):P===".."?(z.splice(k,1),x++):x&&(z.splice(k,1),x--);if(!g&&!M)for(;x--;x)z.unshift("..");g&&z[0]!==""&&(!z[0]||z[0].charAt(0)!=="/")&&z.unshift(""),Ch&&z.join("/").substr(-1)!=="/"&&z.push("");var Gh=z[0]===""||z[0]&&z[0].charAt(0)==="/";if(H){J.hostname=J.host=Gh?"":z.length?z.shift():"";var R=J.host&&J.host.indexOf("@")>0?J.host.split("@"):!1;R&&(J.auth=R.shift(),J.host=J.hostname=R.shift())}return g=g||J.host&&z.length,g&&!Gh&&z.unshift(""),z.length?J.pathname=z.join("/"):(J.pathname=null,J.path=null),(!rh(J.pathname)||!rh(J.search))&&(J.path=(J.pathname?J.pathname:"")+(J.search?J.search:"")),J.auth=$.auth||J.auth,J.slashes=J.slashes||$.slashes,J.href=J.format(),J};i.prototype.parseHost=function(){var $=this.host,Z=I2.exec($);Z&&(Z=Z[0],Z!==":"&&(this.port=Z.substr(1)),$=$.substr(0,$.length-Z.length)),$&&(this.hostname=$)};x2={parse:Nh,resolve:F1,resolveObject:H1,format:g1,Url:i,URL:o0,URLSearchParams:N1}});(function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)window.audioContext=new window.AudioContext;var $=function(Z){if(window.audioContext){var J=window.audioContext.createBuffer(1,1,22050),j=window.audioContext.createBufferSource();if(j.buffer=J,j.connect(window.audioContext.destination),j.start)j.start(0);else if(j.play)j.play(0);else if(j.noteOn)j.noteOn(0)}document.removeEventListener("touchstart",$),document.removeEventListener("touchend",$),document.removeEventListener("click",$)};document.addEventListener("touchstart",$),document.addEventListener("touchend",$),document.addEventListener("click",$),document.addEventListener("visibilitychange",()=>{if(!document.hidden){if(window.audioContext)window.audioContext.resume()}})})();var mh;async function h2($){try{let Z=await window.audioContext.decodeAudioData(new Uint8Array($).buffer),J=window.audioContext.createBufferSource();J.buffer=Z,J.connect(mh),J.start()}catch(Z){}}function $2($){if(!mh)mh=window.audioContext.createGain(),mh.connect(window.audioContext.destination);mh.gain.value=$/128}var d0=(()=>{var $=import.meta.url;return async function(Z={}){var J,j=Z,v,U,G=new Promise((h,Q)=>{v=h,U=Q}),q=typeof window=="object",L=typeof WorkerGlobalScope!="undefined",Y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",w=!q&&!Y&&!L,K=Object.assign({},j),D=[],V="./this.program",A=(h,Q)=>{throw Q},N="";function g(h){if(j.locateFile)return j.locateFile(h,N);return N+h}var M,z;if(Y){if(typeof process=="undefined"||!process.release||process.release.name!=="node")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var B=process.versions.node,H=B.split(".").slice(0,3);H=H[0]*1e4+H[1]*100+H[2].split("-")[0]*1;var R=160000;if(H<160000)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+B+")");var P=(()=>({})),Ch=(l0(),sh(m0));if(!import.meta.url.startsWith("data:"))N=Ch.dirname((s0(),sh(a0)).fileURLToPath(import.meta.url))+"/";if(z=(h)=>{h=r(h)?new URL(h):h;var Q=P.readFileSync(h);return f(Buffer.isBuffer(Q)),Q},M=async(h,Q=!0)=>{h=r(h)?new URL(h):h;var X=P.readFileSync(h,Q?void 0:"utf8");return f(Q?Buffer.isBuffer(X):typeof X=="string"),X},!j.thisProgram&&process.argv.length>1)V=process.argv[1].replace(/\\/g,"/");D=process.argv.slice(2),A=(h,Q)=>{throw process.exitCode=h,Q}}else if(w){if(typeof process=="object"&&!0||typeof window=="object"||typeof WorkerGlobalScope!="undefined")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else if(q||L){if(L)N=self.location.href;else if(typeof document!="undefined"&&document.currentScript)N=document.currentScript.src;if($)N=$;if(N.startsWith("blob:"))N="";else N=N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1);if(!(typeof window=="object"||typeof WorkerGlobalScope!="undefined"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{if(L)z=(h)=>{var Q=new XMLHttpRequest;return Q.open("GET",h,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)};M=async(h)=>{if(r(h))return new Promise((X,W)=>{var O=new XMLHttpRequest;O.open("GET",h,!0),O.responseType="arraybuffer",O.onload=()=>{if(O.status==200||O.status==0&&O.response){X(O.response);return}W(O.status)},O.onerror=W,O.send(null)});var Q=await fetch(h,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw new Error(Q.status+" : "+Q.url)}}}else throw new Error("environment detection error");var x=j.print||void 0,k=j.printErr||void 0;if(Object.assign(j,K),K=null,x0(),j.arguments)D=j.arguments;if(m("arguments","arguments_"),j.thisProgram)V=j.thisProgram;m("thisProgram","thisProgram"),f(typeof j.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),f(typeof j.read=="undefined","Module.read option was removed"),f(typeof j.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)"),f(typeof j.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)"),f(typeof j.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),f(typeof j.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),m("asm","wasmExports"),m("readAsync","readAsync"),m("readBinary","readBinary"),m("setWindowTitle","setWindowTitle");var Gh="IDBFS is no longer included by default; build with -lidbfs.js",Oh="PROXYFS is no longer included by default; build with -lproxyfs.js",eh="WORKERFS is no longer included by default; build with -lworkerfs.js",Yh="FETCHFS is no longer included by default; build with -lfetchfs.js",gh="ICASEFS is no longer included by default; build with -licasefs.js",Fh="JSFILEFS is no longer included by default; build with -ljsfilefs.js",Bh="OPFS is no longer included by default; build with -lopfs.js",h0="NODEFS is no longer included by default; build with -lnodefs.js";f(!w,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var Jh=j.wasmBinary;if(m("wasmBinary","wasmBinary"),typeof WebAssembly!="object")k("no native wasm support detected");var s,jh=!1,$0;function f(h,Q){if(!h)T("Assertion failed"+(Q?": "+Q:""))}var M1,d,Qh,Xh,j0,vh,b,Kh,fh,C0,Vh,Uh=!1,J0="data:application/octet-stream;base64,",Hh=(h)=>h.startsWith(J0),r=(h)=>h.startsWith("file://");function Q0(){var h=oh();if(f((h&3)==0),h==0)h+=4;b[h>>2]=34821223,b[h+4>>2]=2310721022,b[0]=1668509029}function Wh(){if(jh)return;var h=oh();if(h==0)h+=4;var Q=b[h>>2],X=b[h+4>>2];if(Q!=34821223||X!=2310721022)T(`Stack overflow! Stack cookie has been overwritten at ${Zh(h)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Zh(X)} ${Zh(Q)}`);if(b[0]!=1668509029)T("Runtime error: The application has corrupted its heap memory area (address zero)!")}if((()=>{var h=new Int16Array(1),Q=new Int8Array(h.buffer);if(h[0]=25459,Q[0]!==115||Q[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),j.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function m(h,Q,X=!0){if(!Object.getOwnPropertyDescriptor(j,h))Object.defineProperty(j,h,{configurable:!0,get(){let W=X?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";T(`\`Module.${h}\` has been replaced by \`${Q}\``+W)}})}function Z0(h){if(Object.getOwnPropertyDescriptor(j,h))T(`\`Module.${h}\` was supplied but \`${h}\` not included in INCOMING_MODULE_JS_API`)}function Ih(h){return h==="FS_createPath"||h==="FS_createDataFile"||h==="FS_createPreloadedFile"||h==="FS_unlink"||h==="addRunDependency"||h==="FS_createLazyFile"||h==="FS_createDevice"||h==="removeRunDependency"}function Ah(h,Q){if(typeof globalThis!="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,h))Object.defineProperty(globalThis,h,{configurable:!0,get(){Q();return}})}function Th(h,Q){Ah(h,()=>{c(`\`${h}\` is not longer defined by emscripten. ${Q}`)})}Th("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Th("asm","Please use wasmExports instead");function q0(h){Ah(h,()=>{var Q=`\`${h}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,X=h;if(!X.startsWith("_"))X="$"+h;if(Q+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${X}')`,Ih(h))Q+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";c(Q)}),bh(h)}function bh(h){if(!Object.getOwnPropertyDescriptor(j,h))Object.defineProperty(j,h,{configurable:!0,get(){var Q=`'${h}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;if(Ih(h))Q+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";T(Q)}})}function c1(...h){}function Rh(){var h=s.buffer;j.HEAP8=d=new Int8Array(h),j.HEAP16=Xh=new Int16Array(h),j.HEAPU8=Qh=new Uint8Array(h),j.HEAPU16=j0=new Uint16Array(h),j.HEAP32=vh=new Int32Array(h),j.HEAPU32=b=new Uint32Array(h),j.HEAPF32=Kh=new Float32Array(h),j.HEAPF64=Vh=new Float64Array(h),j.HEAP64=fh=new BigInt64Array(h),j.HEAPU64=C0=new BigUint64Array(h)}f(!j.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),f(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),f(!j.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),f(!j.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var Sh=[],Ph=[],y1=[],xh=[];function G0(){if(j.preRun){if(typeof j.preRun=="function")j.preRun=[j.preRun];while(j.preRun.length)X0(j.preRun.shift())}kh(Sh)}function L0(){f(!Uh),Uh=!0,Wh(),kh(Ph)}function Y0(){if(Wh(),j.postRun){if(typeof j.postRun=="function")j.postRun=[j.postRun];while(j.postRun.length)K0(j.postRun.shift())}kh(xh)}function X0(h){Sh.unshift(h)}function v0(h){Ph.unshift(h)}function t1(h){}function K0(h){xh.unshift(h)}var l=0,e=null,n={},p=null;function m1(h){var Q=h;while(!0){if(!n[h])return h;h=Q+Math.random()}}function f0(h){if(l++,j.monitorRunDependencies?.(l),h){if(f(!n[h]),n[h]=1,p===null&&typeof setInterval!="undefined")p=setInterval(()=>{if(jh){clearInterval(p),p=null;return}var Q=!1;for(var X in n){if(!Q)Q=!0,k("still waiting on run dependencies:");k(`dependency: ${X}`)}if(Q)k("(end of list)")},1e4)}else k("warning: run dependency added without ID")}function V0(h){if(l--,j.monitorRunDependencies?.(l),h)f(n[h]),delete n[h];else k("warning: run dependency removed without ID");if(l==0){if(p!==null)clearInterval(p),p=null;if(e){var Q=e;e=null,Q()}}}function T(h){j.onAbort?.(h),h="Aborted("+h+")",k(h),jh=!0;var Q=new WebAssembly.RuntimeError(h);throw U(Q),Q}var S={error(){T("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){S.error()},createDataFile(){S.error()},createPreloadedFile(){S.error()},createLazyFile(){S.error()},open(){S.error()},mkdev(){S.error()},registerDevice(){S.error()},analyzePath(){S.error()},ErrnoError(){S.error()}};j.FS_createDataFile=S.createDataFile,j.FS_createPreloadedFile=S.createPreloadedFile;function E(h,Q){return(...X)=>{f(Uh,`native function \`${h}\` called before runtime initialization`);var W=t[h];return f(W,`exported native function \`${h}\` not found`),f(X.length<=Q,`native function \`${h}\` called with ${X.length} args but expects ${Q}`),W(...X)}}var hh;function U0(){if(j.locateFile){var h="tinymidipcm.wasm";if(!Hh(h))return g(h);return h}return new URL("tinymidipcm.wasm",import.meta.url).href}function W0(h){if(h==hh&&Jh)return new Uint8Array(Jh);if(z)return z(h);throw"both async and sync fetching of the wasm failed"}async function k0(h){if(!Jh)try{var Q=await M(h);return new Uint8Array(Q)}catch{}return W0(h)}async function z0(h,Q){try{var X=await k0(h),W=await WebAssembly.instantiate(X,Q);return W}catch(O){if(k(`failed to asynchronously prepare wasm: ${O}`),r(hh))k(`warning: Loading from a file URI (${hh}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`);T(O)}}async function B0(h,Q,X){if(!h&&typeof WebAssembly.instantiateStreaming=="function"&&!Hh(Q)&&!r(Q)&&!Y)try{var W=fetch(Q,{credentials:"same-origin"}),O=await WebAssembly.instantiateStreaming(W,X);return O}catch(F){k(`wasm streaming compile failed: ${F}`),k("falling back to ArrayBuffer instantiation")}return z0(Q,X)}function w0(){return{env:wh,wasi_snapshot_preview1:wh}}async function D0(){function h(I,u){return t=I.exports,s=t.memory,f(s,"memory not found in wasm exports"),Rh(),v0(t.__wasm_call_ctors),V0("wasm-instantiate"),t}f0("wasm-instantiate");var Q=j;function X(I){return f(j===Q,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),Q=null,h(I.instance)}var W=w0();if(j.instantiateWasm)try{return j.instantiateWasm(W,h)}catch(I){k(`Module.instantiateWasm callback failed with error: ${I}`),U(I)}hh??=U0();try{var O=await B0(Jh,hh,W),F=X(O);return F}catch(I){return U(I),Promise.reject(I)}}class ph{name="ExitStatus";constructor(h){this.message=`Program terminated with exit(${h})`,this.status=h}}var kh=(h)=>{while(h.length>0)h.shift()(j)};function N0(h,Q="i8"){if(Q.endsWith("*"))Q="*";switch(Q){case"i1":return d[h];case"i8":return d[h];case"i16":return Xh[h>>1];case"i32":return vh[h>>2];case"i64":return fh[h>>3];case"float":return Kh[h>>2];case"double":return Vh[h>>3];case"*":return b[h>>2];default:T(`invalid type for getValue: ${Q}`)}}var h1=j.noExitRuntime||!0,Zh=(h)=>{return f(typeof h==="number"),h>>>=0,"0x"+h.toString(16).padStart(8,"0")};function O0(h,Q,X="i8"){if(X.endsWith("*"))X="*";switch(X){case"i1":d[h]=Q;break;case"i8":d[h]=Q;break;case"i16":Xh[h>>1]=Q;break;case"i32":vh[h>>2]=Q;break;case"i64":fh[h>>3]=BigInt(Q);break;case"float":Kh[h>>2]=Q;break;case"double":Vh[h>>3]=Q;break;case"*":b[h>>2]=Q;break;default:T(`invalid type for setValue: ${X}`)}}var l1=(h)=>Y1(h),p1=()=>M0(),c=(h)=>{if(c.shown||={},!c.shown[h]){if(c.shown[h]=1,Y)h="warning: "+h;k(h)}},g0=()=>T("native code called abort()"),F0=()=>2147483648,H0=(h,Q)=>{return f(Q,"alignment argument is required"),Math.ceil(h/Q)*Q},I0=(h)=>{var Q=s.buffer,X=(h-Q.byteLength+65535)/65536|0;try{return s.grow(X),Rh(),1}catch(W){k(`growMemory: Attempted to grow heap from ${Q.byteLength} bytes to ${h} bytes, but got error: ${W}`)}},A0=(h)=>{var Q=Qh.length;h>>>=0,f(h>Q);var X=F0();if(h>X)return k(`Cannot enlarge memory, requested ${h} bytes, but the limit is ${X} bytes!`),!1;for(var W=1;W<=4;W*=2){var O=Q*(1+0.2/W);O=Math.min(O,h+100663296);var F=Math.min(X,H0(Math.max(h,O),65536)),I=I0(F);if(I)return!0}return k(`Failed to grow the heap from ${Q} bytes to ${F} bytes, not enough memory!`),!1},Eh=typeof TextDecoder!="undefined"?new TextDecoder:void 0,_h=(h,Q=0,X=NaN)=>{var W=Q+X,O=Q;while(h[O]&&!(O>=W))++O;if(O-Q>16&&h.buffer&&Eh)return Eh.decode(h.subarray(Q,O));var F="";while(Q<O){var I=h[Q++];if(!(I&128)){F+=String.fromCharCode(I);continue}var u=h[Q++]&63;if((I&224)==192){F+=String.fromCharCode((I&31)<<6|u);continue}var qh=h[Q++]&63;if((I&240)==224)I=(I&15)<<12|u<<6|qh;else{if((I&248)!=240)c("Invalid UTF-8 leading byte "+Zh(I)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");I=(I&7)<<18|u<<12|qh<<6|h[Q++]&63}if(I<65536)F+=String.fromCharCode(I);else{var v1=I-65536;F+=String.fromCharCode(55296|v1>>10,56320|v1&1023)}}return F},T0=(h,Q)=>{return f(typeof h=="number",`UTF8ToString expects a number (got ${typeof h})`),h?_h(Qh,h,Q):""},$1={varargs:void 0,getStr(h){var Q=T0(h);return Q}},b0=(h)=>{T("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},uh=9007199254740992,nh=-9007199254740992,R0=(h)=>h<nh||h>uh?NaN:Number(h);function j1(h,Q,X,W){return Q=R0(Q),70}var Mh=[null,[],[]],ch=(h,Q)=>{var X=Mh[h];if(f(X),Q===0||Q===10)(h===1?x:k)(_h(X)),X.length=0;else X.push(Q)},S0=()=>{if(q1(0),Mh[1].length)ch(1,10);if(Mh[2].length)ch(2,10)},P0=(h,Q,X,W)=>{var O=0;for(var F=0;F<X;F++){var I=b[Q>>2],u=b[Q+4>>2];Q+=8;for(var qh=0;qh<u;qh++)ch(h,Qh[I+qh]);O+=u}return b[W>>2]=O,0};function x0(){Z0("fetchSettings")}var wh={_abort_js:g0,emscripten_resize_heap:A0,fd_close:b0,fd_seek:j1,fd_write:P0},t=await D0(),C1=E("__wasm_call_ctors",0),J1=j._malloc=E("malloc",1),Q1=j._free=E("free",1),E0=j._tsf_load_memory=E("tsf_load_memory",2),o=j._tsf_close=E("tsf_close",1),u1=j._tsf_reset=E("tsf_reset",1),n1=j._tsf_set_output=E("tsf_set_output",4),o1=j._realloc=E("realloc",2),Z1=j._tsf_channel_set_bank_preset=E("tsf_channel_set_bank_preset",4),i1=j._tml_load_memory=E("tml_load_memory",2),a1=j._midi_render=E("midi_render",7),q1=E("fflush",1),G1=E("strerror",1),L1=t.emscripten_stack_init,s1=t.emscripten_stack_get_free,_0=t.emscripten_stack_get_base,oh=t.emscripten_stack_get_end,Y1=t._emscripten_stack_restore,X1=t._emscripten_stack_alloc,M0=t.emscripten_stack_get_current;j.setValue=O0,j.getValue=N0;var c0=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","stackAlloc","getTempRet0","setTempRet0","zeroMemory","exitJS","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","getExecutableName","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","mmapAlloc","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_unlink","FS_createDataFile","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"];c0.forEach(q0);var ih=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","alignMemory","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","UTF16Decoder","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"];ih.forEach(bh);var ah;function yh(){L1(),Q0()}function th(){if(l>0){e=th;return}if(yh(),G0(),l>0){e=th;return}function h(){if(f(!ah),ah=!0,j.calledRun=!0,jh)return;L0(),v(j),j.onRuntimeInitialized?.(),f(!j._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Y0()}if(j.setStatus)j.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>j.setStatus(""),1),h()},1);else h();Wh()}function C(){var h=x,Q=k,X=!1;x=k=(W)=>{X=!0};try{S0()}catch(W){}if(x=h,k=Q,X)c("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc."),c("(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)")}if(j.preInit){if(typeof j.preInit=="function")j.preInit=[j.preInit];while(j.preInit.length>0)j.preInit.pop()()}th(),J=G;for(let h of Object.keys(j))if(!(h in Z))Object.defineProperty(Z,h,{configurable:!0,get(){T(`Access to module property ('${h}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return J}})();(()=>{var $=d0;d0=function(Z){if(new.target)throw new Error("loadTinyMidiPCM() should not be called with `new loadTinyMidiPCM()`");return $(Z)}})();var I1=d0;class A1{constructor($={}){if(this.wasmModule=void 0,this.soundfontBufferPtr=0,this.soundfontPtr=0,this.midiBufferPtr=0,this.renderInterval=$.renderInterval||100,this.sampleRate=$.sampleRate||44100,this.channels=$.channels||2,this.gain=$.gain||0,!$.bufferSize)this.setBufferDuration(1);else this.bufferSize=$.bufferSize;this.onPCMData=$.onPCMData||(()=>{}),this.onRenderEnd=$.onRenderEnd||(()=>{}),this.renderTimer=void 0,this.test=0}async init(){if(this.wasmModule)return;this.wasmModule=await I1(),this.pcmBufferPtr=this.wasmModule._malloc(this.bufferSize),this.msecsPtr=this.wasmModule._malloc(8)}setBufferDuration($){this.bufferSize=4*this.sampleRate*this.channels*$}ensureInitialized(){if(!this.wasmModule)throw new Error(`${this.constructor.name} not initalized. call .init()`)}setSoundfont($){this.ensureInitialized();let{_malloc:Z,_free:J,_tsf_load_memory:j,_tsf_set_output:v}=this.wasmModule;J(this.soundfontBufferPtr),this.soundfontBufferPtr=Z($.length),this.wasmModule.HEAPU8.set($,this.soundfontBufferPtr),this.soundfontPtr=j(this.soundfontBufferPtr,$.length),v(this.soundfontPtr,this.channels===2?0:2,this.sampleRate,this.gain)}getPCMBuffer(){this.ensureInitialized();let $=new Uint8Array(this.bufferSize);return $.set(this.wasmModule.HEAPU8.subarray(this.pcmBufferPtr,this.pcmBufferPtr+this.bufferSize)),$}getMIDIMessagePtr($){let{_malloc:Z,_free:J,_tml_load_memory:j}=this.wasmModule;return J(this.midiBufferPtr),this.midiBufferPtr=Z($.length),this.wasmModule.HEAPU8.set($,this.midiBufferPtr),j(this.midiBufferPtr,$.length)}renderMIDIMessage($){let{_midi_render:Z}=this.wasmModule;return Z(this.soundfontPtr,$,this.channels,this.sampleRate,this.pcmBufferPtr,this.bufferSize,this.msecsPtr)}render($){if(this.ensureInitialized(),!this.soundfontPtr)throw new Error("no soundfont buffer set. call .setSoundfont");window.clearTimeout(this.renderTimer);let{setValue:Z,getValue:J,_tsf_reset:j,_tsf_channel_set_bank_preset:v}=this.wasmModule;Z(this.msecsPtr,0,"double"),j(this.soundfontPtr),v(this.soundfontPtr,9,128,0);let U=this.getMIDIMessagePtr($),G=function(){U=this.renderMIDIMessage(U);let q=this.getPCMBuffer();if(this.onPCMData(q),U)this.renderTimer=setTimeout(G,this.renderInterval);else this.onRenderEnd(J(this.msecsPtr,"double"))}.bind(this);this.renderTimer=setTimeout(()=>{G()},16)}}(async()=>{let U=null,G=null,q=new Float32Array,L=window.audioContext.createGain();L.gain.setValueAtTime(0.1,window.audioContext.currentTime),L.connect(window.audioContext.destination);let Y=window.audioContext.currentTime,w=[],K=new A1({renderInterval:30,onPCMData:(B)=>{let H=new Float32Array(B.buffer),R=new Float32Array(q.length+H.length);R.set(q,0),R.set(H,q.length),q=R},onRenderEnd:(B)=>{},bufferSize:102400});await K.init();let D=await fetch(new URL("SCC1_Florestan.sf2",import.meta.url)),V=new Uint8Array(await D.arrayBuffer());K.setSoundfont(V);function A(){if(!window.audioContext||!q.length)return;let B=window.audioContext.createBufferSource(),H=q.length/2,R=window.audioContext.createBuffer(2,H,44100);for(let P=0;P<2;P++){let Ch=R.getChannelData(P),x=P;for(let k=0;k<H;k++)Ch[k]=q[x],x+=2}if(Y<window.audioContext.currentTime)Y=window.audioContext.currentTime;B.buffer=R,B.connect(L),B.start(Y),w.push(B),Y+=R.duration,q=new Float32Array}let N;function g(B){let H=window.audioContext.currentTime;return L.gain.cancelScheduledValues(H),L.gain.setTargetAtTime(0,H,0.5),setTimeout(B,2000)}function M(){if(N)clearInterval(N);if(q=new Float32Array,w.length){let B=L.gain.value;L.gain.setValueAtTime(0,window.audioContext.currentTime),w.forEach((H)=>{H.stop(window.audioContext.currentTime)}),w=[],L.gain.setValueAtTime(B,window.audioContext.currentTime)}}function z(B,H){if(B!==-1)window._tinyMidiVolume(B);Y=window.audioContext.currentTime,N=setInterval(A,250),K.render(H)}window._tinyMidiStop=async(B)=>{if(B)G=g(()=>{M()});else M(),clearTimeout(U),clearTimeout(G)},window._tinyMidiVolume=(B=1)=>{L.gain.setValueAtTime(B,window.audioContext.currentTime)},window._tinyMidiPlay=async(B,H,R)=>{if(!B)return;if(await window._tinyMidiStop(R),R)U=setTimeout(()=>{z(H,B)},2000);else z(H,B)}})();function E2($,Z,J){if(window._tinyMidiPlay)window._tinyMidiPlay($,Z/128,J)}function _2($){if(window._tinyMidiVolume)window._tinyMidiVolume($/128)}function M2($){if(window._tinyMidiStop)window._tinyMidiStop($)}var r0=(()=>{var $=import.meta.url;return async function(Z={}){var J,j=Z,v,U,G=new Promise((C,h)=>{v=C,U=h}),q=typeof window=="object",L=typeof WorkerGlobalScope!="undefined",Y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",w=!q&&!Y&&!L,K=Object.assign({},j),D=[],V="./this.program",A=(C,h)=>{throw h},N="";function g(C){if(j.locateFile)return j.locateFile(C,N);return N+C}var M,z;if(Y){if(typeof process=="undefined"||!process.release||process.release.name!=="node")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var B=process.versions.node,H=B.split(".").slice(0,3);H=H[0]*1e4+H[1]*100+H[2].split("-")[0]*1;var R=160000;if(H<160000)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+B+")");var P=(()=>({})),Ch=(l0(),sh(m0));if(!import.meta.url.startsWith("data:"))N=Ch.dirname((s0(),sh(a0)).fileURLToPath(import.meta.url))+"/";if(z=(C)=>{C=r(C)?new URL(C):C;var h=P.readFileSync(C);return f(Buffer.isBuffer(h)),h},M=async(C,h=!0)=>{C=r(C)?new URL(C):C;var Q=P.readFileSync(C,h?void 0:"utf8");return f(h?Buffer.isBuffer(Q):typeof Q=="string"),Q},!j.thisProgram&&process.argv.length>1)V=process.argv[1].replace(/\\/g,"/");D=process.argv.slice(2),A=(C,h)=>{throw process.exitCode=C,h}}else if(w){if(typeof process=="object"&&!0||typeof window=="object"||typeof WorkerGlobalScope!="undefined")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else if(q||L){if(L)N=self.location.href;else if(typeof document!="undefined"&&document.currentScript)N=document.currentScript.src;if($)N=$;if(N.startsWith("blob:"))N="";else N=N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1);if(!(typeof window=="object"||typeof WorkerGlobalScope!="undefined"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{if(L)z=(C)=>{var h=new XMLHttpRequest;return h.open("GET",C,!1),h.responseType="arraybuffer",h.send(null),new Uint8Array(h.response)};M=async(C)=>{if(r(C))return new Promise((Q,X)=>{var W=new XMLHttpRequest;W.open("GET",C,!0),W.responseType="arraybuffer",W.onload=()=>{if(W.status==200||W.status==0&&W.response){Q(W.response);return}X(W.status)},W.onerror=X,W.send(null)});var h=await fetch(C,{credentials:"same-origin"});if(h.ok)return h.arrayBuffer();throw new Error(h.status+" : "+h.url)}}}else throw new Error("environment detection error");var x=j.print||void 0,k=j.printErr||void 0;if(Object.assign(j,K),K=null,Q1(),j.arguments)D=j.arguments;if(m("arguments","arguments_"),j.thisProgram)V=j.thisProgram;m("thisProgram","thisProgram"),f(typeof j.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),f(typeof j.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),f(typeof j.read=="undefined","Module.read option was removed"),f(typeof j.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)"),f(typeof j.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)"),f(typeof j.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),f(typeof j.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),m("asm","wasmExports"),m("readAsync","readAsync"),m("readBinary","readBinary"),m("setWindowTitle","setWindowTitle");var Gh="IDBFS is no longer included by default; build with -lidbfs.js",Oh="PROXYFS is no longer included by default; build with -lproxyfs.js",eh="WORKERFS is no longer included by default; build with -lworkerfs.js",Yh="FETCHFS is no longer included by default; build with -lfetchfs.js",gh="ICASEFS is no longer included by default; build with -licasefs.js",Fh="JSFILEFS is no longer included by default; build with -ljsfilefs.js",Bh="OPFS is no longer included by default; build with -lopfs.js",h0="NODEFS is no longer included by default; build with -lnodefs.js";f(!w,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var Jh=j.wasmBinary;if(m("wasmBinary","wasmBinary"),typeof WebAssembly!="object")k("no native wasm support detected");var s,jh=!1,$0;function f(C,h){if(!C)T("Assertion failed"+(h?": "+h:""))}var M1,d,Qh,Xh,j0,vh,b,Kh,fh,C0,Vh,Uh=!1,J0="data:application/octet-stream;base64,",Hh=(C)=>C.startsWith(J0),r=(C)=>C.startsWith("file://");function Q0(){var C=_0();if(f((C&3)==0),C==0)C+=4;b[C>>2]=34821223,b[C+4>>2]=2310721022,b[0]=1668509029}function Wh(){if(jh)return;var C=_0();if(C==0)C+=4;var h=b[C>>2],Q=b[C+4>>2];if(h!=34821223||Q!=2310721022)T(`Stack overflow! Stack cookie has been overwritten at ${Zh(C)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Zh(Q)} ${Zh(h)}`);if(b[0]!=1668509029)T("Runtime error: The application has corrupted its heap memory area (address zero)!")}if((()=>{var C=new Int16Array(1),h=new Int8Array(C.buffer);if(C[0]=25459,h[0]!==115||h[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),j.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function m(C,h,Q=!0){if(!Object.getOwnPropertyDescriptor(j,C))Object.defineProperty(j,C,{configurable:!0,get(){let X=Q?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";T(`\`Module.${C}\` has been replaced by \`${h}\``+X)}})}function Z0(C){if(Object.getOwnPropertyDescriptor(j,C))T(`\`Module.${C}\` was supplied but \`${C}\` not included in INCOMING_MODULE_JS_API`)}function Ih(C){return C==="FS_createPath"||C==="FS_createDataFile"||C==="FS_createPreloadedFile"||C==="FS_unlink"||C==="addRunDependency"||C==="FS_createLazyFile"||C==="FS_createDevice"||C==="removeRunDependency"}function Ah(C,h){if(typeof globalThis!="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,C))Object.defineProperty(globalThis,C,{configurable:!0,get(){h();return}})}function Th(C,h){Ah(C,()=>{c(`\`${C}\` is not longer defined by emscripten. ${h}`)})}Th("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Th("asm","Please use wasmExports instead");function q0(C){Ah(C,()=>{var h=`\`${C}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,Q=C;if(!Q.startsWith("_"))Q="$"+C;if(h+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${Q}')`,Ih(C))h+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";c(h)}),bh(C)}function bh(C){if(!Object.getOwnPropertyDescriptor(j,C))Object.defineProperty(j,C,{configurable:!0,get(){var h=`'${C}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;if(Ih(C))h+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";T(h)}})}function c1(...C){}function Rh(){var C=s.buffer;j.HEAP8=d=new Int8Array(C),j.HEAP16=Xh=new Int16Array(C),j.HEAPU8=Qh=new Uint8Array(C),j.HEAPU16=j0=new Uint16Array(C),j.HEAP32=vh=new Int32Array(C),j.HEAPU32=b=new Uint32Array(C),j.HEAPF32=Kh=new Float32Array(C),j.HEAPF64=Vh=new Float64Array(C),j.HEAP64=fh=new BigInt64Array(C),j.HEAPU64=C0=new BigUint64Array(C)}f(!j.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),f(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),f(!j.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),f(!j.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var Sh=[],Ph=[],y1=[],xh=[];function G0(){if(j.preRun){if(typeof j.preRun=="function")j.preRun=[j.preRun];while(j.preRun.length)X0(j.preRun.shift())}kh(Sh)}function L0(){f(!Uh),Uh=!0,Wh(),kh(Ph)}function Y0(){if(Wh(),j.postRun){if(typeof j.postRun=="function")j.postRun=[j.postRun];while(j.postRun.length)K0(j.postRun.shift())}kh(xh)}function X0(C){Sh.unshift(C)}function v0(C){Ph.unshift(C)}function t1(C){}function K0(C){xh.unshift(C)}var l=0,e=null,n={},p=null;function m1(C){var h=C;while(!0){if(!n[C])return C;C=h+Math.random()}}function f0(C){if(l++,j.monitorRunDependencies?.(l),C){if(f(!n[C]),n[C]=1,p===null&&typeof setInterval!="undefined")p=setInterval(()=>{if(jh){clearInterval(p),p=null;return}var h=!1;for(var Q in n){if(!h)h=!0,k("still waiting on run dependencies:");k(`dependency: ${Q}`)}if(h)k("(end of list)")},1e4)}else k("warning: run dependency added without ID")}function V0(C){if(l--,j.monitorRunDependencies?.(l),C)f(n[C]),delete n[C];else k("warning: run dependency removed without ID");if(l==0){if(p!==null)clearInterval(p),p=null;if(e){var h=e;e=null,h()}}}function T(C){j.onAbort?.(C),C="Aborted("+C+")",k(C),jh=!0;var h=new WebAssembly.RuntimeError(C);throw U(h),h}var S={error(){T("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){S.error()},createDataFile(){S.error()},createPreloadedFile(){S.error()},createLazyFile(){S.error()},open(){S.error()},mkdev(){S.error()},registerDevice(){S.error()},analyzePath(){S.error()},ErrnoError(){S.error()}};j.FS_createDataFile=S.createDataFile,j.FS_createPreloadedFile=S.createPreloadedFile;function E(C,h){return(...Q)=>{f(Uh,`native function \`${C}\` called before runtime initialization`);var X=o[C];return f(X,`exported native function \`${C}\` not found`),f(Q.length<=h,`native function \`${C}\` called with ${Q.length} args but expects ${h}`),X(...Q)}}var hh;function U0(){if(j.locateFile){var C="bzip2.wasm";if(!Hh(C))return g(C);return C}return new URL("bzip2.wasm",import.meta.url).href}function W0(C){if(C==hh&&Jh)return new Uint8Array(Jh);if(z)return z(C);throw"both async and sync fetching of the wasm failed"}async function k0(C){if(!Jh)try{var h=await M(C);return new Uint8Array(h)}catch{}return W0(C)}async function z0(C,h){try{var Q=await k0(C),X=await WebAssembly.instantiate(Q,h);return X}catch(W){if(k(`failed to asynchronously prepare wasm: ${W}`),r(hh))k(`warning: Loading from a file URI (${hh}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`);T(W)}}async function B0(C,h,Q){if(!C&&typeof WebAssembly.instantiateStreaming=="function"&&!Hh(h)&&!r(h)&&!Y)try{var X=fetch(h,{credentials:"same-origin"}),W=await WebAssembly.instantiateStreaming(X,Q);return W}catch(O){k(`wasm streaming compile failed: ${O}`),k("falling back to ArrayBuffer instantiation")}return z0(h,Q)}function w0(){return{env:E0,wasi_snapshot_preview1:E0}}async function D0(){function C(F,I){return o=F.exports,s=o.memory,f(s,"memory not found in wasm exports"),Rh(),v0(o.__wasm_call_ctors),V0("wasm-instantiate"),o}f0("wasm-instantiate");var h=j;function Q(F){return f(j===h,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),h=null,C(F.instance)}var X=w0();if(j.instantiateWasm)try{return j.instantiateWasm(X,C)}catch(F){k(`Module.instantiateWasm callback failed with error: ${F}`),U(F)}hh??=U0();try{var W=await B0(Jh,hh,X),O=Q(W);return O}catch(F){return U(F),Promise.reject(F)}}class ph{name="ExitStatus";constructor(C){this.message=`Program terminated with exit(${C})`,this.status=C}}var kh=(C)=>{while(C.length>0)C.shift()(j)};function N0(C,h="i8"){if(h.endsWith("*"))h="*";switch(h){case"i1":return d[C];case"i8":return d[C];case"i16":return Xh[C>>1];case"i32":return vh[C>>2];case"i64":return fh[C>>3];case"float":return Kh[C>>2];case"double":return Vh[C>>3];case"*":return b[C>>2];default:T(`invalid type for getValue: ${h}`)}}var h1=j.noExitRuntime||!0,Zh=(C)=>{return f(typeof C==="number"),C>>>=0,"0x"+C.toString(16).padStart(8,"0")};function O0(C,h,Q="i8"){if(Q.endsWith("*"))Q="*";switch(Q){case"i1":d[C]=h;break;case"i8":d[C]=h;break;case"i16":Xh[C>>1]=h;break;case"i32":vh[C>>2]=h;break;case"i64":fh[C>>3]=BigInt(h);break;case"float":Kh[C>>2]=h;break;case"double":Vh[C>>3]=h;break;case"*":b[C>>2]=h;break;default:T(`invalid type for setValue: ${Q}`)}}var l1=(C)=>oh(C),p1=()=>X1(),c=(C)=>{if(c.shown||={},!c.shown[C]){if(c.shown[C]=1,Y)C="warning: "+C;k(C)}},g0=()=>T("native code called abort()"),F0=()=>2147483648,H0=(C,h)=>{return f(h,"alignment argument is required"),Math.ceil(C/h)*h},I0=(C)=>{var h=s.buffer,Q=(C-h.byteLength+65535)/65536|0;try{return s.grow(Q),Rh(),1}catch(X){k(`growMemory: Attempted to grow heap from ${h.byteLength} bytes to ${C} bytes, but got error: ${X}`)}},A0=(C)=>{var h=Qh.length;C>>>=0,f(C>h);var Q=F0();if(C>Q)return k(`Cannot enlarge memory, requested ${C} bytes, but the limit is ${Q} bytes!`),!1;for(var X=1;X<=4;X*=2){var W=h*(1+0.2/X);W=Math.min(W,C+100663296);var O=Math.min(Q,H0(Math.max(C,W),65536)),F=I0(O);if(F)return!0}return k(`Failed to grow the heap from ${h} bytes to ${O} bytes, not enough memory!`),!1},Eh=0,_h=()=>h1||Eh>0,T0=(C)=>{if($0=C,!_h())j.onExit?.(C),jh=!0;A(C,new ph(C))},$1=(C,h)=>{if($0=C,th(),_h()&&!h){var Q=`program exited (with status: ${C}), but keepRuntimeAlive() is set (counter=${Eh}) due to an async operation, so halting execution but not exiting the runtime or preventing further async execution (you can use emscripten_force_exit, if you want to force a true shutdown)`;U(Q),k(Q)}T0(C)},b0=$1,uh=typeof TextDecoder!="undefined"?new TextDecoder:void 0,nh=(C,h=0,Q=NaN)=>{var X=h+Q,W=h;while(C[W]&&!(W>=X))++W;if(W-h>16&&C.buffer&&uh)return uh.decode(C.subarray(h,W));var O="";while(h<W){var F=C[h++];if(!(F&128)){O+=String.fromCharCode(F);continue}var I=C[h++]&63;if((F&224)==192){O+=String.fromCharCode((F&31)<<6|I);continue}var u=C[h++]&63;if((F&240)==224)F=(F&15)<<12|I<<6|u;else{if((F&248)!=240)c("Invalid UTF-8 leading byte "+Zh(F)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");F=(F&7)<<18|I<<12|u<<6|C[h++]&63}if(F<65536)O+=String.fromCharCode(F);else{var qh=F-65536;O+=String.fromCharCode(55296|qh>>10,56320|qh&1023)}}return O},R0=(C,h)=>{return f(typeof C=="number",`UTF8ToString expects a number (got ${typeof C})`),C?nh(Qh,C,h):""},j1={varargs:void 0,getStr(C){var h=R0(C);return h}},Mh=(C)=>{T("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},ch=9007199254740992,S0=-9007199254740992,P0=(C)=>C<S0||C>ch?NaN:Number(C);function x0(C,h,Q,X){return h=P0(h),70}var wh=[null,[],[]],t=(C,h)=>{var Q=wh[C];if(f(Q),h===0||h===10)(C===1?x:k)(nh(Q)),Q.length=0;else Q.push(h)},C1=()=>{if(Z1(0),wh[1].length)t(1,10);if(wh[2].length)t(2,10)},J1=(C,h,Q,X)=>{var W=0;for(var O=0;O<Q;O++){var F=b[h>>2],I=b[h+4>>2];h+=8;for(var u=0;u<I;u++)t(C,Qh[F+u]);W+=I}return b[X>>2]=W,0};function Q1(){Z0("fetchSettings")}var E0={_abort_js:g0,emscripten_resize_heap:A0,exit:b0,fd_close:Mh,fd_seek:x0,fd_write:J1},o=await D0(),u1=E("__wasm_call_ctors",0),n1=j._malloc=E("malloc",1),o1=j._free=E("free",1),Z1=E("fflush",1),i1=j._BZ2_bzBuffToBuffCompress=E("BZ2_bzBuffToBuffCompress",7),a1=j._BZ2_bzBuffToBuffDecompress=E("BZ2_bzBuffToBuffDecompress",6),q1=E("strerror",1),G1=o.emscripten_stack_init,L1=o.emscripten_stack_get_free,s1=o.emscripten_stack_get_base,_0=o.emscripten_stack_get_end,oh=o._emscripten_stack_restore,Y1=o._emscripten_stack_alloc,X1=o.emscripten_stack_get_current;j.setValue=O0,j.getValue=N0;var M0=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","stackAlloc","getTempRet0","setTempRet0","zeroMemory","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","getExecutableName","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","mmapAlloc","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_unlink","FS_createDataFile","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"];M0.forEach(q0);var c0=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","ptrToString","exitJS","getHeapMax","growMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","keepRuntimeAlive","alignMemory","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","UTF16Decoder","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"];c0.forEach(bh);var ih;function ah(){G1(),Q0()}function yh(){if(l>0){e=yh;return}if(ah(),G0(),l>0){e=yh;return}function C(){if(f(!ih),ih=!0,j.calledRun=!0,jh)return;L0(),v(j),j.onRuntimeInitialized?.(),f(!j._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Y0()}if(j.setStatus)j.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>j.setStatus(""),1),C()},1);else C();Wh()}function th(){var C=x,h=k,Q=!1;x=k=(X)=>{Q=!0};try{C1()}catch(X){}if(x=C,k=h,Q)c("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc."),c("(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)")}if(j.preInit){if(typeof j.preInit=="function")j.preInit=[j.preInit];while(j.preInit.length>0)j.preInit.pop()()}yh(),J=G;for(let C of Object.keys(j))if(!(C in Z))Object.defineProperty(Z,C,{configurable:!0,get(){T(`Access to module property ('${C}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return J}})();(()=>{var $=r0;r0=function(Z){if(new.target)throw new Error("loadBZip2WASM() should not be called with `new loadBZip2WASM()`");return $(Z)}})();var T1=r0;var c2={"-2":"BZ_PARAM_ERROR: incorrect parameters","-3":"BZ_MEM_ERROR: couldn't allocate enough memory","-4":"BZ_DATA_ERROR: data integrity error when decompressing","-5":"BZ_DATA_ERROR_MAGIC: compressed data has incorrect header","-7":"BZ_UNEXPECTED_EOF: compressed data ends too early","-8":"BZ_OUTBUFF_FULL: destination buffer is full"};class b1{constructor(){this.wasmModule=void 0}async init(){if(this.wasmModule)return;this.wasmModule=await T1()}ensureInitialized(){if(!this.wasmModule)throw new Error(`${this.constructor.name} not initalized. call .init()`)}handleError($,Z,J){if($===0)return;this.wasmModule._free(Z),this.wasmModule._free(J);let j=c2[$];if(j)throw new Error(j);throw new Error(`error code: ${$}`)}createWASMBuffers($,Z){let{_malloc:J,setValue:j,HEAPU8:v}=this.wasmModule,U=J($.length);v.set($,U);let G=J(Z),q=J(Z);return j(q,Z,"i32"),{sourcePtr:U,destPtr:G,destLengthPtr:q}}createBuffer($,Z){let{_free:J,getValue:j,HEAPU8:v}=this.wasmModule,U=j(Z,"i32"),G=new Uint8Array(U);return G.set(v.subarray($,$+U)),J($),J(Z),G}decompress($,Z,J=!1,j=!1){let v=new Uint8Array($);if(j)Z=v[0]<<24|v[1]<<16|v[2]<<8|v[3],v[0]=66,v[1]=90,v[2]=104,v[3]=49,J=!1;if(J){let Y=new Uint8Array(v.length+4);Y[0]=66,Y[1]=90,Y[2]=104,Y[3]=49,Y.set(v,4),v=Y}this.ensureInitialized();let{sourcePtr:U,destPtr:G,destLengthPtr:q}=this.createWASMBuffers(v,Z),L=this.wasmModule._BZ2_bzBuffToBuffDecompress(G,q,U,v.length,0,0);return this.wasmModule._free(U),this.handleError(L,G,q),this.createBuffer(G,q)}compress($,Z=!1,J=!1,j=1,v=0){if(this.ensureInitialized(),!v)v=$.length;if(v<128)v=128;if(j<=0||j>9)throw new RangeError("blockSize should be between 1-9");let{sourcePtr:U,destPtr:G,destLengthPtr:q}=this.createWASMBuffers($,v),L=this.wasmModule._BZ2_bzBuffToBuffCompress(G,q,U,$.length,j,0,30);this.wasmModule._free(U),this.handleError(L,G,q);let Y=this.createBuffer(G,q);if(Z)Y[0]=$.length>>24&255,Y[1]=$.length>>16&255,Y[2]=$.length>>8&255,Y[3]=$.length&255;if(J)return Y.subarray(4);return Y}}var R1=new b1;await R1.init();var y2=R1;var Q$=document.getElementById("game"),a=document.getElementById("canvas-overlay"),t2=document.getElementById("canvas"),y=t2.getContext("2d",{willReadFrequently:!0}),m2=document.createElement("canvas"),Z$=document.createElement("img"),q$=m2.getContext("2d",{willReadFrequently:!0});var e0=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","Shift","z","x","c","v","b","n","m","Del","123",","," ",".","Enter"],l2=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Shift","Z","X","C","V","B","N","M","Del","123",","," ",".","Enter"],p2=["1","2","3","4","5","6","7","8","9","0","!",'"',"$","%","_","&","*","(",")","1/2","@","=","<",">","~",";",":","Del","abc","#"," ","?","Enter"],u2=["£","^","[","]","{","}","'","-","+","/","\\","|","","","","","","","","2/2","","","","","","","","Del","abc",""," ","","Enter"],zh=[0,10,19,28],$h=50,lh=30,n2=1000,S1=5,P1=75;function o2(){return document.fullscreenElement!==null}class x1{canvasKeyboard;nativeKeyboard;mode;constructor(){this.canvasKeyboard=new E1,this.nativeKeyboard=new _1;let $=localStorage.getItem("mobileKeyboardMode");if($==="native")this.mode=1;else if($==="canvas")this.mode=2;else this.mode=0}show($,Z){if(this.mode===0)if(o2())this.canvasKeyboard.show();else this.nativeKeyboard.show();else if(this.mode===2)this.canvasKeyboard.show($,Z);else if(this.mode===1)this.nativeKeyboard.show($,Z)}hide(){this.canvasKeyboard.hide(),this.nativeKeyboard.hide()}draw(){this.canvasKeyboard.draw()}isDisplayed(){return this.canvasKeyboard.isDisplayed()||this.nativeKeyboard.isDisplayed()}isWithinCanvasKeyboard($,Z){return this.canvasKeyboard.isDisplayed()&&this.canvasKeyboard.posWithinKeyboard($,Z)}captureMouseUp($,Z){if(this.canvasKeyboard.isDisplayed())return this.canvasKeyboard.captureMouseUp($,Z);else if(this.nativeKeyboard.isDisplayed())return this.nativeKeyboard.captureMouseUp($,Z);return!1}captureMouseDown($,Z){if(this.canvasKeyboard.isDisplayed())return this.canvasKeyboard.captureMouseDown($,Z);else if(this.nativeKeyboard.isDisplayed())return this.nativeKeyboard.captureMouseDown($,Z);return!1}notifyTouchMove($,Z){if(this.canvasKeyboard.isDisplayed())this.canvasKeyboard.notifyTouchMove($,Z);else if(this.nativeKeyboard.isDisplayed())this.nativeKeyboard.notifyTouchMove($,Z)}}class E1{displayed=!1;height=lh*4+10;width=$h*10+10;startX=0;startY=532-this.height;mode=0;animateBoxIndex=-1;animateBoxTimeout=0;touchStartAtX=0;touchStartAtY=0;touching=!1;touchStartTimestamp=0;getBoxColorForIndex($){if(this.animateBoxIndex>-1){if(this.animateBoxIndex===$)return"#a6a6a6"}let Z=this.getCharForIndex($);if(Z!==void 0&&Z.length>1)return"#a9afba";return"#c8cdd1"}getBoxForIndex($){let Z=$<zh[1]?0:$<zh[2]?1:$<zh[3]?2:3,j={startX:($-zh[Z])*$h+5,startY:Z*lh+5,width:$h,height:lh};if(Z===1)j.startX+=$h/2;if($===30)j.width*=6;if($>30)j.startX+=$h*5;return j}getCharForIndex($){if(this.mode===1)return l2[$];else if(this.mode===2)return p2[$];else if(this.mode===3)return u2[$];return e0[$]}drawKeyBoxes(){for(let $=0;$<e0.length;$++){let Z=this.getBoxForIndex($);y.fillStyle=this.getBoxColorForIndex($),y.beginPath(),y.roundRect(this.startX+Z.startX+2,this.startY+Z.startY+2,Z.width-2,Z.height-2,5),y.fill()}}drawKeyChars(){y.fillStyle="black",y.textAlign="center",y.textBaseline="middle";for(let $=0;$<e0.length;$++){y.font="16px Roboto, sans-serif";let Z=this.getBoxForIndex($),J=this.startX+Z.startX+$h/2,j=this.startY+Z.startY+lh/2+2,v=this.getCharForIndex($);if(v.length>1)y.font="14px Roboto, sans-serif";y.fillText(v,J,j)}}drawBackground(){y.fillStyle="#dadde2",y.beginPath(),y.roundRect(this.startX,this.startY,this.width,this.height,5),y.fill()}draw(){if(!this.isDisplayed())return;y.save(),this.drawBackground(),this.drawKeyBoxes(),this.drawKeyChars(),y.restore()}show($,Z){this.mode=0,this.displayed=!0}hide(){this.displayed=!1}isDisplayed(){return this.displayed}posWithinKeyboard($,Z){let J=$>=this.startX&&$<this.startX+this.width,j=Z>=this.startY&&Z<this.startY+this.height;return J&&j}getBoxIndexForClick($,Z){let J=$-this.startX,j=Z-this.startY;if(J<0||j<0||J>=this.width||j>=this.height)return-1;let v=Math.floor(j/lh),U=Math.floor(J/$h);if(v===0)return U;if(v===1){if(J<$h/2||J>this.width-$h/2)return-1;return zh[1]+Math.floor((J-$h/2)/$h)}if(v===2){if(U>=9)return-1;return zh[2]+U}return zh[3]+U}getCharForClick($,Z){let J=this.getBoxIndexForClick($,Z);if(J>-1){let j="";if(J>=30&&J<=35)j=" ";else if(J===36)j=this.getCharForIndex(31);else if(J===37)j="Enter";else j=this.getCharForIndex(J);if(j==="Del")j="Backspace";return j}return""}captureMouseDown($,Z){if(this.posWithinKeyboard($,Z))return!0;return!1}captureMouseUp($,Z){if(this.touching=!1,this.posWithinKeyboard($,Z)){let J=this.getBoxIndexForClick($,Z),j=this.getCharForClick($,Z);if(j==="Shift"){if(this.mode===0)this.mode=1;else this.mode=0;return!0}else if(j==="123"||j==="2/2")return this.mode=2,!0;else if(j==="1/2")return this.mode=3,!0;else if(j==="abc")return this.mode=0,!0;else if(j==="")return!0;let v=new KeyboardEvent("keydown",{key:j,code:j}),U=new KeyboardEvent("keyup",{key:j,code:j});if(a.dispatchEvent(v),a.dispatchEvent(U),!this.animateBoxTimeout){if(J>=30&&J<=35)this.animateBoxIndex=30;else if(J>35)this.animateBoxIndex=J-5;else this.animateBoxIndex=J;this.animateBoxTimeout=window.setTimeout(()=>{this.animateBoxIndex=-1,this.animateBoxTimeout=0},100)}return!0}return!1}notifyTouchMove($,Z){if(!this.posWithinKeyboard($,Z))return;if(this.touching&&performance.now()>this.touchStartTimestamp+n2){this.touching=!1;return}if(!this.touching){this.touching=!0,this.touchStartTimestamp=performance.now(),this.touchStartAtX=$-this.startX,this.touchStartAtY=Z-this.startY;return}let J=Math.abs(Math.abs(this.touchStartAtX-$)-this.startX),j=Math.abs(Math.abs(this.touchStartAtY-Z)-this.startY);if(J>P1||j>P1)return;if(J>S1||j>S1){let v=Math.max(0,Math.min(789-this.width,$-this.touchStartAtX)),U=Math.max(0,Math.min(532-this.height,Z-this.touchStartAtY));this.startX=v,this.startY=U,a.dispatchEvent(new FocusEvent("focus"))}}}class _1{virtualInputElement;displayed=!1;isAndroid=!1;constructor(){if(this.isAndroid=navigator.userAgent.includes("Android"),this.virtualInputElement=document.createElement("input"),this.virtualInputElement.setAttribute("type","password"),this.virtualInputElement.setAttribute("autofocus","autofocus"),this.virtualInputElement.setAttribute("spellcheck","false"),this.virtualInputElement.setAttribute("autocomplete","off"),this.virtualInputElement.setAttribute("style","position: fixed; top: 0px; left: 0px; width: 1px; height: 1px; opacity: 0; z-index: 20;"),this.isAndroid)this.virtualInputElement.addEventListener("input",($)=>{if(!($ instanceof InputEvent))return;let Z=$.data;if(Z===null)return;if($.inputType!=="insertText")return;a.dispatchEvent(new KeyboardEvent("keydown",{key:Z,code:Z})),a.dispatchEvent(new KeyboardEvent("keyup",{key:Z,code:Z}))}),this.virtualInputElement.addEventListener("keydown",($)=>{if($.key==="Enter"||$.key==="Backspace")a.dispatchEvent(new KeyboardEvent("keydown",{key:$.key,code:$.key}))}),this.virtualInputElement.addEventListener("keyup",($)=>{if($.key==="Enter"||$.key==="Backspace")a.dispatchEvent(new KeyboardEvent("keyup",{key:$.key,code:$.key}))});else this.virtualInputElement.addEventListener("keydown",($)=>{a.dispatchEvent(new KeyboardEvent("keydown",{key:$.key,code:$.key}))}),this.virtualInputElement.addEventListener("keyup",($)=>{a.dispatchEvent(new KeyboardEvent("keyup",{key:$.key,code:$.key}))});document.body.appendChild(this.virtualInputElement)}draw(){}show($,Z){if($&&Z)this.virtualInputElement.style.left=`${$}px`,this.virtualInputElement.style.top=`${Z}px`;a.blur(),this.virtualInputElement.focus(),this.virtualInputElement.click(),this.displayed=!0}hide(){this.virtualInputElement.blur(),a.focus(),this.displayed=!1}isDisplayed(){return this.displayed}captureMouseUp($,Z){return!1}captureMouseDown($,Z){return!1}notifyTouchMove($,Z){return}}var i2=new x1;export{M2 as stopMidi,$2 as setWaveVolume,_2 as setMidiVolume,h2 as playWave,E2 as playMidi,i2 as MobileKeyboard,y2 as BZip2};

//# debugId=142DE9B48AFE380664756E2164756E21
