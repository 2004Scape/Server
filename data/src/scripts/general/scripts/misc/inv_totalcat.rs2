[proc,inv_totalcat](inv $inv, category $cat)(int)
def_int $count = 0;
def_int $slot = 0;
while ($slot < inv_size($inv)) {
  def_obj $item = inv_getobj($inv, $slot);
  if ($item ! null & oc_category($item) = $cat) {
    $count = calc($count + inv_getnum($inv, $slot));
  }
  $slot = calc($slot + 1);
}
return($count);