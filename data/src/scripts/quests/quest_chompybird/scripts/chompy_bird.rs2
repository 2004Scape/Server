[proc,spawn_chompy_bird](coord $coord)
{
    // def_coord $spawn_coord = map_findsquare($coord, 3, 10, 1);
    def_coord $spawn_coord = map_findsquare($coord, 4, 4, 1);
    
    npc_add($spawn_coord, chompy_bird, 100);
    // TODO anim?
    npc_say("Sqwirk!");

    // TODO confirm behaviour, looks like it wanders first then hunts?
    npc_sethuntmode(chompybird);
}

// triggered by the .hunt config, the Chompy has found, and arrived at, the Bloated Toad
[ai_queue4,chompy_bird]
if (.npc_find(npc_coord, bloated_toad, 1, 1) = true) {
    npc_sethuntmode(null);
    npc_facesquare(.npc_coord);
    npc_queue(5, 0, 0);
    .npc_queue(5, 0, 0);
}

// the Chompy is eating the toad
[ai_queue5,chompy_bird]
npc_say("Sqwark!");
npc_delay(3);
npc_say("Gobble!");
npc_delay(2);

[opnpc4,chompy_bird_corpse]
mes("You start plucking the chompy bird.");
anim(human_pickupfloor, 0);
p_delay(1);
obj_add(npc_coord, raw_chompy, 1, ^lootdrop_duration);
obj_add(npc_coord, bones, 1, ^lootdrop_duration);
inv_add(inv, feather, calc(random(20) + 10));
npc_del;
