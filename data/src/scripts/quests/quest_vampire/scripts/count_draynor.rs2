[opnpc2,count_draynor] @count_draynor_player_attack;
[apnpc2,count_draynor]
if (npc_range(coord) > 1) {
    // TODO
    p_aprange(1);
    return;
}
@count_draynor_player_attack;

[ai_opplayer2,count_draynor] @count_draynor_attack;
[ai_applayer2,count_draynor] @count_draynor_attack;

[ai_queue3,count_draynor]
npc_anim(human_death, 0);
npc_delay(2);
npc_del;

[label,count_draynor_attack]
npc_anim(human_unarmedpunch, 0);
// TODO npc_action_delay

[label,count_draynor_player_attack]
if (%skill_clock >= map_clock) {
    p_opnpc(2); // TODO p_apnpc()
    return;
}

anim(human_unarmedpunch, 0);

// TODO combat needs to be implemented
if (inv_total(inv, garlic) > 0 & random(4) = 0) {
    mes("The vampire seems to weaken.");
}

if (inv_total(inv, stake) > 0 & inv_total(inv, hammer) > 0) {
    mes("You hammer the stake into the vampire's chest!");
    inv_del(inv, stake, 1);
    anim(human_stake, 0);
    npc_setmode(none);
    npc_queue(3, 0);
    queue(quest_vampire_complete, 3);
    return;
}

if (inv_total(inv, stake) > 0) {
    mes("You're unable to push the stake far enough in!");
}

if (random(4) = 0) {
    mes("The vampire seems to regenerate!");
}

%skill_clock = add(map_clock, 2);
@count_draynor_player_attack;
