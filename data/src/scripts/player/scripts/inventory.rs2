[inv_buttond,inventory:inv]
def_int $slot = last_slot;
// check if the slot is valid.
if ($slot < 0 | $slot >= inv_size(inv)) return;

// check if the slot was empty.
def_obj $obj = inv_getobj(inv, $slot);
if ($obj = null) return;
// TODO inv_buttond does not set a last_verifyobj. Maybe it should?

def_int $slot2 = last_useslot;
// check if the slot is valid.
if ($slot2 < 0 | $slot2 >= inv_size(inv)) return;

inv_swap(inv, $slot, $slot2);
