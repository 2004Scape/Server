[oploc1,_empty_crate]
// Treasure Trail
if(map_members = true) {
    if(loc_coord = 1_50_50_28_16 & inv_total(inv, trail_clue_easy_simple_exp002) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp002);
        return;
    } else if(loc_coord = 0_51_50_25_2 & inv_total(inv, trail_clue_easy_simple_exp006) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp006);
        return;
    } else if(loc_coord = 0_50_53_28_41 & inv_total(inv, trail_clue_easy_simple_exp012) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp012);
        return;
    } else if(loc_coord = 0_47_50_4_22 & inv_total(inv, trail_clue_easy_simple_exp019) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp019);
        return;
    } else if(loc_coord = 0_41_52_21_10 & inv_total(inv, trail_clue_easy_riddle_exp002) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp002);
        return;
    } else if(loc_coord = 0_40_51_55_27 & inv_total(inv, trail_clue_easy_riddle_exp004) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp004);
        return;
    } else if(loc_coord = 0_50_53_26_60 & inv_total(inv, trail_clue_easy_riddle_exp007) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp007);
        return;
    } else if(loc_coord = 1_40_51_52_40 & inv_total(inv, trail_clue_easy_riddle_exp009) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp009);
        return;
    } else if(loc_coord = 0_47_52_21_27 & inv_total(inv, trail_clue_easy_riddle_exp010) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp010);
        return;
    } else if(loc_coord = 0_50_150_19_17 & inv_total(inv, trail_clue_hard_riddle_exp001) = 1) {
        ~trail_clue_hard_loc_interact(trail_clue_hard_riddle_exp001);
        return;
    }
} 
if (random(^findsomethingnice_chance) = 0 & ~in_tutorial_island(coord) = false) { // complete guess
    mes("You search the crate..."); // guess
    p_delay(2);
    ~findsomethingnice;
    return;
}
mes("You search the crate but find nothing.");

[oploc1,_empty_crates]
// Treasure Trail
if (map_members = true) {
    if (loc_coord = 0_40_52_57_19 & inv_total(inv, trail_clue_easy_riddle_exp005) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp005);
        return;
    } else if(map_members = true & loc_coord = 2_49_51_30_45 & inv_total(inv, trail_clue_hard_riddle_exp008) = 1) {
        ~trail_clue_hard_loc_interact(trail_clue_hard_riddle_exp008);
        return;
    }
}
if (random(^findsomethingnice_chance) = 0 & ~in_tutorial_island(coord) = false) { // complete guess
    mes("You search the crates..."); // guess
    p_delay(2);
    ~findsomethingnice;
    return;
}
mes("You search the crates but find nothing of value.");

[oploc1,_empty_boxes]
// Treasure Trail
if(map_members = true) {
    if(loc_coord = 0_50_50_48_46 & inv_total(inv, trail_clue_easy_simple_exp003) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp003);
        return;
    } else if(loc_coord = 0_50_52_3_56 & inv_total(inv, trail_clue_easy_simple_exp009) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp009);
        return;
    } else if(loc_coord = 0_48_53_1_38 & inv_total(inv, trail_clue_easy_simple_exp014) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp014);
        return;
    } else if(loc_coord = 0_46_52_11_62 & inv_total(inv, trail_clue_easy_simple_exp016) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_simple_exp016);
        return;
    } else if(loc_coord = 0_41_51_30_35 & inv_total(inv, trail_clue_easy_riddle_exp003) = 1) {
        ~trail_clue_easy_loc_interact(trail_clue_easy_riddle_exp003);
        return;
    }
}
if (random(^findsomethingnice_chance) = 0 & ~in_tutorial_island(coord) = false) { // complete guess
    mes("You search the boxes...");
    p_delay(2);
    ~findsomethingnice;
    return;
}
mes("There is nothing interesting in these boxes."); // https://youtu.be/Yb53SKVt7z8?t=173