[opheldu,guam_leaf]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,marentill]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,tarromin]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,harralander]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,ranarr_weed]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,irit_leaf]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,avantoe]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,kwuarm]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,cadantine]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,lantadyme]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,dwarf_weed]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,torstol]
~attempt_brew_potion(last_useslot, last_slot);

[opheldu,eye_of_newt]
~attempt_brew_potion(last_useslot, last_slot);

[proc,attempt_brew_potion](int $use_slot, int $last_slot)
def_obj $ingredient = inv_getobj(inv, $last_slot);
def_obj $used_with = inv_getobj(inv, $use_slot);
def_obj $solvent = oc_param($ingredient, brew_potion_solvent);

if ($used_with ! $solvent) {
    jump(nothing_interesting_happens);
}

def_int $current_level = stat(herblore);
def_int $herb_level = oc_param($ingredient, brew_potion_level);
if ($current_level < $herb_level) {
    // https://youtu.be/VthR9A85TQU?t=159
    mes("You need a Herblore level of at least <tostring($herb_level)> to make this potion.");
    return;
}
~brew_potion($ingredient, $solvent);

[proc,brew_potion](obj $ingredient, obj $solvent)
// https://youtu.be/S6P-hUzgqPw?t=1
def_string $message = oc_param($ingredient, brew_potion_message);
def_obj $mixture = oc_param($ingredient, brew_potion_mixture);
def_int $experience = oc_param($ingredient, brew_potion_exp);

// inv_del(inv, $ingredient, 1);
// inv_del(inv, $solvent, 1);
inv_add(inv, $mixture, 1);
mes($message);
anim(brew_potion, 0);
givexp(herblore, $experience);
